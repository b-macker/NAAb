// Phase 2.4.2: Basic Union Types Test
// Testing union type runtime validation

fn printValue(value: int | string) {
    print("Value: ", value)
}

fn getValue(flag: bool) -> int | string {
    if (flag) {
        return 42
    } else {
        return "hello"
    }
}

struct Config {
    port: int | string
    debug: bool
}

main {
    print("=== Phase 2.4.2: Union Types Testing ===")

    // Test 1: Function parameters with union types
    print("\n[Test 1] Union parameters:")
    printValue(42)
    printValue("test")

    // Test 2: Function return types
    print("\n[Test 2] Union return types:")
    let val1 = getValue(true)
    print("getValue(true): ", val1)
    let val2 = getValue(false)
    print("getValue(false): ", val2)

    // Test 3: Struct with union field
    print("\n[Test 3] Struct with union field:")
    let config1 = Config {
        port: 8080,
        debug: true
    }
    print("Config with int port: ", config1.port)

    let config2 = Config {
        port: "8080",
        debug: false
    }
    print("Config with string port: ", config2.port)

    // Test 4: typeof operator
    print("\n[Test 4] Runtime type checking:")
    let mixed = getValue(true)
    print("typeof(mixed): ", typeof(mixed))

    // Test 5: Variable with union type
    print("\n[Test 5] Variable with union type:")
    let flexible: int | string = 42
    print("flexible = ", flexible)
    flexible = "changed to string"
    print("flexible = ", flexible)

    print("\n=== All tests completed ===")
}
