use io
use json

main {
    io.write("=== Phase 2.3: Testing return values from inline code ===\n")

    # Test 1: Python returning int
    let py_int = <<python 42 >>
    io.write("Python int: ", json.stringify(py_int), "\n")

    # Test 2: Python returning string
    let py_str = <<python "Hello from Python".upper() >>
    io.write("Python string: ", py_str, "\n")

    # Test 3: JavaScript returning number
    let js_num = <<javascript 10 + 32 >>
    io.write("JavaScript number: ", json.stringify(js_num), "\n")

    # Test 4: JavaScript returning string
    let js_str = <<javascript "NAAb".toLowerCase() >>
    io.write("JavaScript string: ", js_str, "\n")

    # Test 5: Shell returning ShellResult struct
    let shell_result = <<bash echo "Hello from Bash" >>
    io.write("Shell string: ", shell_result.stdout, "\n")
    io.write("Shell exit code: ", json.stringify(shell_result.exit_code), "\n")

    # Test 6: With variable binding and return
    let count = 10
    let py_doubled = <<python[count] count * 2 >>
    io.write("Python with binding and return: ", json.stringify(py_doubled), "\n")

    # Test 7: Multi-line Python with return
    let py_calc = <<python
x = 5
y = 7
x + y
    >>
    io.write("Python multi-line result: ", json.stringify(py_calc), "\n")

    # Test 8: JavaScript multi-line with return
    let js_calc = <<javascript
const a = 3;
const b = 4;
a * b
    >>
    io.write("JavaScript multi-line result: ", json.stringify(js_calc), "\n")

    io.write("=== Phase 2.3 tests complete ===\n")
}
