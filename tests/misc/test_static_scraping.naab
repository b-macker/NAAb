// Test static web scraping with BeautifulSoup

use io
use json

main {
    io.write("ğŸŒ Testing static web scraping...\n")

    let test_url = "https://example.com"

    let result_json: string? = <<python[test_url]
import requests
from bs4 import BeautifulSoup
import json

try:
    response = requests.get(test_url, timeout=10)
    response.raise_for_status()
    soup = BeautifulSoup(response.text, 'html.parser')

    # Extract title and first paragraph
    title = soup.find('h1')
    paragraph = soup.find('p')

    result = {
        "status": "success",
        "url": test_url,
        "title": title.get_text(strip=True) if title else "No title",
        "first_paragraph": paragraph.get_text(strip=True) if paragraph else "No paragraph"
    }
except Exception as e:
    result = {
        "status": "error",
        "error": str(e)
    }

json.dumps(result)
    >>

    if result_json == null {
        io.write_error("âŒ Python block returned null\n")
    } else {
        io.write("âœ… Result:\n", result_json, "\n")

        let parsed = json.parse(result_json)
        if parsed["status"] == "success" {
            io.write("\nğŸ“„ Title: ", parsed["title"], "\n")
            io.write("ğŸ“ First paragraph: ", parsed["first_paragraph"], "\n")
        }
    }
}
