// Test: Block Registry Import via use BLOCK-ID as alias
// Tests that use BLOCK-JS-STRING as StrUtils works

// IMPORTANT: Block imports must come BEFORE module imports!
// Import JavaScript block from registry
use "BLOCK-JS-STRING" as StrUtils

// Now import stdlib modules
use io
use json

main {
    io.write("=== Block Registry Import Test ===\n\n")

    // TEST 1: Import block successfully
    io.write("TEST 1: Block imported\n")
    io.write("  ✓ use BLOCK-JS-STRING as StrUtils succeeded\n\n")

    // TEST 2: Call block function - toUpper
    io.write("TEST 2: Call StrUtils.toUpper()\n")
    let upper = StrUtils.toUpper("hello world")
    io.write("  Result: ", upper, "\n")
    io.write("  ✓ Block function call works\n\n")

    // TEST 3: Call block function - toLower
    io.write("TEST 3: Call StrUtils.toLower()\n")
    let lower = StrUtils.toLower("HELLO WORLD")
    io.write("  Result: ", lower, "\n")
    io.write("  ✓ Another function call works\n\n")

    // TEST 4: Call block function - reverse
    io.write("TEST 4: Call StrUtils.reverse()\n")
    let reversed = StrUtils.reverse("NAAb")
    io.write("  Result: ", reversed, "\n")
    io.write("  ✓ Third function call works\n\n")

    io.write("=== Key Finding (ISS-029) ===\n")
    io.write("Block registry import works correctly!\n")
    io.write("• use BLOCK-ID as alias syntax works\n")
    io.write("• Alias is properly registered in environment\n")
    io.write("• Can call block functions via Alias.function()\n")
    io.write("\n=== All tests passed! ===\n")
}
