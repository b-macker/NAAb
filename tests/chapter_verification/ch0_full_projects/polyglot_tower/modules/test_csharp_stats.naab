// polyglot_tower/modules/test_csharp_stats.naab
use io
use json
use types
use inventory // The module we are testing

main {
    io.write("=== Testing C# calculate_total_stats ===\n")

    let dummy_weapon = new types.Item { name: "Test Sword", type: "weapon", value: 10, attack_bonus: 5, defense_bonus: null, effect: null, rarity: null }
    let dummy_armor = new types.Item { name: "Test Armor", type: "armor", value: 5, attack_bonus: null, defense_bonus: 3, effect: null, rarity: null }

    let stats = inventory.calculate_total_stats(50, 20, dummy_weapon, dummy_armor)

    io.write("Returned stats type: ", type(stats), "\n")
    io.write("Returned stats: ", json.stringify(stats), "\n")

    // Check specific fields
    io.write("Attack: ", stats["attack"], "\n")
    io.write("Defense: ", stats["defense"], "\n")

    io.write("=== Test Complete ===\n")
}
