// Test: Go executor for polyglot blocks

main {
    let pass = 0
    let fail = 0

    // Test 1: Basic Go expression (auto-wrapped in package main)
    let r1 = <<go
    2 + 3
    >>
    if r1 == 5 { pass = pass + 1 } else { fail = fail + 1; print("FAIL test 1: got " + r1) }

    // Test 2: Go with explicit package main
    let r2 = <<go
    package main
    import "fmt"
    func main() {
        fmt.Println(42)
    }
    >>
    if r2 == 42 { pass = pass + 1 } else { fail = fail + 1; print("FAIL test 2: got " + r2) }

    // Test 3: Go multi-line with variable
    let r3 = <<go
    x := 10
    y := 20
    x + y
    >>
    if r3 == 30 { pass = pass + 1 } else { fail = fail + 1; print("FAIL test 3: got " + r3) }

    // Test 4: Go string result
    let r4 = <<go
    "hello go"
    >>
    if r4 == "hello go" { pass = pass + 1 } else { fail = fail + 1; print("FAIL test 4: got " + r4) }

    // Test 5: Go with fmt.Println explicitly (auto-wrapped)
    let r5 = <<go
    package main
    import "fmt"
    func main() {
        result := 7 * 8
        fmt.Println(result)
    }
    >>
    if r5 == 56 { pass = pass + 1 } else { fail = fail + 1; print("FAIL test 5: got " + r5) }

    // Test 6: Go variable binding from NAAb
    let x = 100
    let r6 = <<go[x]
    x * 2
    >>
    if r6 == 200 { pass = pass + 1 } else { fail = fail + 1; print("FAIL test 6: got " + r6) }

    // Test 7: Go float result
    let r7 = <<go
    3.14
    >>
    if r7 == 3.14 { pass = pass + 1 } else { fail = fail + 1; print("FAIL test 7: got " + r7) }

    // Test 8: Go with loop
    let r8 = <<go
    sum := 0
    for i := 1; i <= 10; i++ {
        sum += i
    }
    sum
    >>
    if r8 == 55 { pass = pass + 1 } else { fail = fail + 1; print("FAIL test 8: got " + r8) }

    print("=== Go Executor Tests ===")
    print("PASS: " + pass)
    print("FAIL: " + fail)
    if fail == 0 {
        print("All tests passed!")
    }
}
