// Common LLM mistakes to detect
// Each section demonstrates a pattern that should be detected

use io

// MISTAKE 1: Unnecessary type annotations
// LLMs often over-annotate when type is obvious
fn testUnnecessaryAnnotations() {
    let x: int = 42  // Type obvious from literal
    let name: string = "Alice"  // Type obvious
    let flag: bool = true  // Type obvious

    // These are fine (type not obvious):
    let y: int = getUserAge()
    let config: dict<string, any> = loadConfig()
}

// MISTAKE 2: Using async without implementation
// LLMs often assume async/await works
async fn fetchData() {
    // This should warn that async is not fully implemented
    let result = await http.get(url)
    return result
}

// MISTAKE 3: Trying to use 'fn main()'
// Common mistake from C/Rust/Go background
// (This would be caught by parser, but listed here for completeness)

// MISTAKE 4: JavaScript-style syntax
fn testJavaScriptIdioms() {
    // Using 'const' instead of 'let'
    const x = 42

    // Using '===' instead of '=='
    if x === 42 {
        io.write("Equal\n")
    }

    // Using 'undefined' instead of 'null'
    let value = undefined
}

// MISTAKE 5: Python-style syntax
fn testPythonIdioms() {
    // Using 'None' instead of 'null'
    let value = None

    // Using 'def' instead of 'fn'
    def calculate(x, y):
        return x + y
}

// MISTAKE 6: Polyglot block without variable list
fn testPolyglotMisuse() {
    let data = [1, 2, 3, 4, 5]

    // WRONG: Missing variable list
    let mean = <<python
    data.mean()
    >>

    // CORRECT: With variable list
    let correct_mean = <<python[data]
    sum(data) / len(data)
    >>
}

// MISTAKE 7: Over-engineering
// LLMs sometimes create unnecessary complexity
fn overeEngineeredFunction(x: int, y: int) -> int {
    // Unnecessarily complex for simple addition
    let result: int
    if x != null {
        if y != null {
            if x is int {
                if y is int {
                    result = x + y
                } else {
                    result = 0
                }
            } else {
                result = 0
            }
        } else {
            result = 0
        }
    } else {
        result = 0
    }
    return result
}

main {
    io.write("LLM pattern detection test\n")
}
