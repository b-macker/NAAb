// Common LLM mistakes - detection test
// This file tests that NAAb correctly handles patterns that work
// NOTE: Patterns that cause parse errors (const, ===, def, async)
// are tested separately as they can't coexist in one runnable file

use io

// Test: Type annotations work correctly
fn testTypeAnnotations() {
    let x: int = 42
    let name: string = "Alice"
    let flag: bool = true

    io.write("Type annotations work: " + x + ", " + name + ", " + flag + "\n")
}

// Test: Polyglot block without variable list warns appropriately
fn testPolyglotMisuse() {
    let data = [1, 2, 3, 4, 5]

    // CORRECT: With variable list
    let correct_mean = <<python[data]
    sum(data) / len(data)
    >>
    io.write("Correct polyglot: mean = " + correct_mean + "\n")
}

// Test: Null handling
fn testNullHandling() {
    let value = null
    if value == null {
        io.write("Null handling works\n")
    }
}

// Test: Proper error handling pattern
fn testErrorHandling() {
    try {
        let x = 1 / 0
    } catch (e) {
        io.write("Error caught properly: " + e + "\n")
    }
}

main {
    io.write("LLM pattern detection test\n")

    testTypeAnnotations()
    testPolyglotMisuse()
    testNullHandling()
    testErrorHandling()

    io.write("All LLM pattern tests passed\n")
}
