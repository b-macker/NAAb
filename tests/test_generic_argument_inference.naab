# Test Phase 2.4.4 Phase 3: Generic Argument Inference

# Test 1: Simple identity function
fn identity<T>(x: T) -> T {
    return x
}

# Test 2: Function with two type parameters
fn makePair<T, U>(first: T, second: U) -> string {
    return first.toString() + "," + second.toString()
}

# Test 3: Generic function with list parameter
fn getFirst<T>(items: list<T>) -> T {
    return items[0]
}

# Test 4: Generic function with multiple parameters of same type
fn max<T>(a: T, b: T) -> T {
    if (a > b) {
        return a
    } else {
        return b
    }
}

# Test 5: Generic function returning a list
fn singleton<T>(x: T) -> list<T> {
    return [x]
}

main {
    print("=== Generic Argument Inference Tests ===")
    print("")

    # Test 1: identity<T>
    print("--- Test 1: identity<T>(x: T) -> T ---")
    let a = identity(42)
    print("  identity(42) = " + a.toString())

    let b = identity("hello")
    print("  identity(\"hello\") = " + b)

    let c = identity(3.14)
    print("  identity(3.14) = " + c.toString())
    print("")

    # Test 2: makePair<T, U>
    print("--- Test 2: makePair<T, U>(first: T, second: U) -> string ---")
    let pair1 = makePair(1, "one")
    print("  makePair(1, \"one\") = " + pair1)

    let pair2 = makePair("key", 100)
    print("  makePair(\"key\", 100) = " + pair2)
    print("")

    # Test 3: getFirst<T> with list
    print("--- Test 3: getFirst<T>(items: list<T>) -> T ---")
    let numbers = [1, 2, 3, 4, 5]
    let first_num = getFirst(numbers)
    print("  getFirst([1,2,3,4,5]) = " + first_num.toString())

    let words = ["hello", "world", "test"]
    let first_word = getFirst(words)
    print("  getFirst([\"hello\",\"world\",\"test\"]) = " + first_word)
    print("")

    # Test 4: max<T>
    print("--- Test 4: max<T>(a: T, b: T) -> T ---")
    let max1 = max(10, 20)
    print("  max(10, 20) = " + max1.toString())

    let max2 = max(3.5, 2.1)
    print("  max(3.5, 2.1) = " + max2.toString())
    print("")

    # Test 5: singleton<T>
    print("--- Test 5: singleton<T>(x: T) -> list<T> ---")
    let list1 = singleton(42)
    print("  singleton(42) = " + list1.toString())

    let list2 = singleton("test")
    print("  singleton(\"test\") = " + list2.toString())
    print("")

    print("=== All tests completed ===")
}
