// String utilities module for integration testing

use string
use array

export function reverse_string(str) {
    let result = ""
    let i = string.length(str) - 1
    while i >= 0 {
        result = result + string.substring(str, i, i + 1)
        i = i - 1
    }
    return result
}

export function is_palindrome(str) {
    let cleaned = string.lower(string.trim(str))
    return cleaned == reverse_string(cleaned)
}

export function word_count(str) {
    let words = string.split(string.trim(str), " ")
    let count = 0
    for word in words {
        if string.length(string.trim(word)) > 0 {
            count = count + 1
        }
    }
    return count
}

export function capitalize_words(str) {
    let words = string.split(str, " ")
    let result = []

    for word in words {
        if string.length(word) > 0 {
            let first = string.upper(string.substring(word, 0, 1))
            let rest = string.substring(word, 1, string.length(word))
            result = array.push(result, first + rest)
        }
    }

    return array.join(result, " ")
}
