// verification/chaos_tests/resource_stress.naab
// Goal: Test file handle cycling for resource leaks.
use file

main {
    print("--- RESOURCE STRESS ---")
    let path = "/data/data/com.termux/files/usr/tmp/naab_leak_test.txt"
    file.write(path, "content")

    print("Cycling 1000 file reads...")
    let i = 0
    while i < 1000 {
        let c = file.read(path)
        if i % 250 == 0 { print("Cycle " + i) }
        i = i + 1
    }

    file.delete(path)
    print("PASS: Resource cycle complete (1000 reads, no leak)")
}
