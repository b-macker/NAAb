// Verification Test: naab-fmt formatter
// Tests that the formatter handles various code styles correctly

use io
use array

fn processItems(items: list<int>) -> int {
    let total = 0
    for item in items {
        total = total + item
    }
    return total
}

fn complexFunction(param1: string, param2: int, param3: bool) -> dict<string, any> {
    let result = {
        "status": "ok",
        "value": param2,
        "flag": param3
    }

    if param3 {
        result["message"] = "Success: " + param1
    } else {
        result["message"] = "Failed"
    }

    return result
}

fn calculateStats(numbers: list<int>) -> dict<string, int> {
    let sum = 0
    let count = 0
    let min = 999999
    let max = -999999

    for num in numbers {
        sum = sum + num
        count = count + 1
        if num < min {
            min = num
        }
        if num > max {
            max = num
        }
    }

    return {
        "sum": sum,
        "count": count,
        "min": min,
        "max": max,
        "average": sum / count
    }
}

main {
    io.write("Testing formatter...")

    let numbers = [1, 2, 3, 4, 5]
    let sum = processItems(numbers)
    io.write("Sum:")
    io.write(sum)

    let result = complexFunction("test", 42, true)
    io.write("Result: " + result["message"])

    let stats = calculateStats([10, 20, 30, 40, 50])
    io.write("Stats - Sum:")
    io.write(stats["sum"])
    io.write("Stats - Average:")
    io.write(stats["average"])
    io.write("Stats - Min:")
    io.write(stats["min"])
    io.write("Stats - Max:")
    io.write(stats["max"])

    io.write("Formatter test complete!")
}
