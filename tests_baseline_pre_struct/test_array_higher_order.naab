// Test array higher-order functions: map, filter, reduce, find

use stdlib;

main {
    // Test 1: map_fn - double all numbers
    let numbers = [1, 2, 3, 4, 5];

    function double(x) {
        return x * 2;
    }

    let doubled = stdlib.map_fn(numbers, double);
    print("Doubled: " + stdlib.join_arr(doubled, ", "));
    // Expected: Doubled: 2, 4, 6, 8, 10

    // Test 2: filter_fn - get even numbers
    function is_even(x) {
        return x % 2 == 0;
    }

    let evens = stdlib.filter_fn(numbers, is_even);
    print("Evens: " + stdlib.join_arr(evens, ", "));
    // Expected: Evens: 2, 4

    // Test 3: reduce_fn - sum all numbers
    function add(acc, x) {
        return acc + x;
    }

    let sum = stdlib.reduce_fn(numbers, add, 0);
    print("Sum: " + sum);
    // Expected: Sum: 15

    // Test 4: find - first number greater than 3
    function greater_than_3(x) {
        return x > 3;
    }

    let found = stdlib.find(numbers, greater_than_3);
    print("First > 3: " + found);
    // Expected: First > 3: 4

    print("All tests passed!");
}
