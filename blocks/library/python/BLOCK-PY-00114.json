{
  "code": "def _generate_rest_api_controller(self, request) -> str:\n        \"\"\"Generate Spring Boot REST API controller\"\"\"\n        return '''\n// Enterprise REST API Controller with Advanced Features\npackage com.alice.enterprise.controller;\n\nimport com.alice.enterprise.dto.*;\nimport com.alice.enterprise.service.UserService;\nimport com.alice.enterprise.exception.BusinessException;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.web.PageableDefault;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.security.access.prepost.PreAuthorize;\nimport org.springframework.validation.annotation.Validated;\nimport org.springframework.web.bind.annotation.*;\nimport io.swagger.v3.oas.annotations.Operation;\nimport io.swagger.v3.oas.annotations.Parameter;\nimport io.swagger.v3.oas.annotations.responses.ApiResponse;\nimport io.swagger.v3.oas.annotations.responses.ApiResponses;\nimport io.swagger.v3.oas.annotations.tags.Tag;\nimport lombok.extern.slf4j.Slf4j;\n\nimport javax.validation.Valid;\nimport javax.validation.constraints.Min;\nimport java.util.UUID;\nimport java.util.concurrent.CompletableFuture;\n\n@Slf4j\n@RestController\n@RequestMapping(\"/api/users\")\n@Validated\n@Tag(name = \"User Management\", description = \"APIs for managing users\")\n@CrossOrigin(origins = {\"http://localhost:3000\", \"http://localhost:8080\"})\npublic class UserController {\n\n    private final UserService userService;\n\n    @Autowired\n    public UserController(UserService userService) {\n        this.userService = userService;\n    }\n\n    @Operation(summary = \"Get all users\", description = \"Retrieve a paginated list of users\")\n    @ApiResponses(value = {\n        @ApiResponse(responseCode = \"200\", description = \"Users retrieved successfully\"),\n        @ApiResponse(responseCode = \"403\", description = \"Access denied\"),\n        @ApiResponse(responseCode = \"500\", description = \"Internal server error\")\n    })\n    @GetMapping\n    @PreAuthorize(\"hasRole('ADMIN') or hasRole('USER')\")\n    public ResponseEntity<ApiResponse<Page<UserResponseDTO>>> getAllUsers(\n            @PageableDefault(size = 20, sort = \"createdAt\") Pageable pageable,\n            @RequestParam(required = false) String search,\n            @RequestParam(required = false) String status) {\n        \n        log.info(\"Retrieving users with pagination: page={}, size={}, search={}, status={}\", \n                 pageable.getPageNumber(), pageable.getPageSize(), search, status);\n\n        Page<UserResponseDTO> users = userService.getAllUsers(pageable, search, status);\n        \n        ApiResponse<Page<UserResponseDTO>> response = ApiResponse.<Page<UserResponseDTO>>builder()\n            .success(true)\n            .data(users)\n            .message(\"Users retrieved successfully\")\n            .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @Operation(summary = \"Get user by ID\", description = \"Retrieve a specific user by their ID\")\n    @ApiResponses(value = {\n        @ApiResponse(responseCode = \"200\", description = \"User found\"),\n        @ApiResponse(responseCode = \"404\", description = \"User not found\"),\n        @ApiResponse(responseCode = \"403\", description = \"Access denied\")\n    })\n    @GetMapping(\"/{userId}\")\n    @PreAuthorize(\"hasRole('ADMIN') or @userService.isOwnerOrSameUser(authentication.name, #userId)\")\n    public ResponseEntity<ApiResponse<UserResponseDTO>> getUserById(\n            @Parameter(description = \"User ID\", required = true)\n            @PathVariable UUID userId) {\n        \n        log.info(\"Retrieving user with ID: {}\", userId);\n\n        UserResponseDTO user = userService.getUserById(userId);\n        \n        ApiResponse<UserResponseDTO> response = ApiResponse.<UserResponseDTO>builder()\n            .success(true)\n            .data(user)\n            .message(\"User retrieved successfully\")\n            .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @Operation(summary = \"Create new user\", description = \"Create a new user account\")\n    @ApiResponses(value = {\n        @ApiResponse(responseCode = \"201\", description = \"User created successfully\"),\n        @ApiResponse(responseCode = \"400\", description = \"Invalid input\"),\n        @ApiResponse(responseCode = \"409\", description = \"User already exists\")\n    })\n    @PostMapping\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public ResponseEntity<ApiResponse<UserResponseDTO>> createUser(\n            @Valid @RequestBody UserCreateDTO userCreateDTO) {\n        \n        log.info(\"Creating new user with email: {}\", userCreateDTO.getEmail());\n\n        UserResponseDTO createdUser = userService.createUser(userCreateDTO);\n        \n        ApiResponse<UserResponseDTO> response = ApiResponse.<UserResponseDTO>builder()\n            .success(true)\n            .data(createdUser)\n            .message(\"User created successfully\")\n            .build();\n\n        return ResponseEntity.status(HttpStatus.CREATED).body(response);\n    }\n\n    @Operation(summary = \"Update user\", description = \"Update an existing user\")\n    @ApiResponses(value = {\n        @ApiResponse(responseCode = \"200\", description = \"User updated successfully\"),\n        @ApiResponse(responseCode = \"400\", description = \"Invalid input\"),\n        @ApiResponse(responseCode = \"404\", description = \"User not found\"),\n        @ApiResponse(responseCode = \"403\", description = \"Access denied\")\n    })\n    @PutMapping(\"/{userId}\")\n    @PreAuthorize(\"hasRole('ADMIN') or @userService.isOwnerOrSameUser(authentication.name, #userId)\")\n    public ResponseEntity<ApiResponse<UserResponseDTO>> updateUser(\n            @PathVariable UUID userId,\n            @Valid @RequestBody UserUpdateDTO userUpdateDTO) {\n        \n        log.info(\"Updating user with ID: {}\", userId);\n\n        UserResponseDTO updatedUser = userService.updateUser(userId, userUpdateDTO);\n        \n        ApiResponse<UserResponseDTO> response = ApiResponse.<UserResponseDTO>builder()\n            .success(true)\n            .data(updatedUser)\n            .message(\"User updated successfully\")\n            .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @Operation(summary = \"Delete user\", description = \"Soft delete a user account\")\n    @ApiResponses(value = {\n        @ApiResponse(responseCode = \"200\", description = \"User deleted successfully\"),\n        @ApiResponse(responseCode = \"404\", description = \"User not found\"),\n        @ApiResponse(responseCode = \"403\", description = \"Access denied\")\n    })\n    @DeleteMapping(\"/{userId}\")\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public ResponseEntity<ApiResponse<Void>> deleteUser(@PathVariable UUID userId) {\n        \n        log.info(\"Deleting user with ID: {}\", userId);\n\n        userService.deleteUser(userId);\n        \n        ApiResponse<Void> response = ApiResponse.<Void>builder()\n            .success(true)\n            .message(\"User deleted successfully\")\n            .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @Operation(summary = \"Activate user\", description = \"Activate a deactivated user account\")\n    @PostMapping(\"/{userId}/activate\")\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public ResponseEntity<ApiResponse<UserResponseDTO>> activateUser(@PathVariable UUID userId) {\n        \n        log.info(\"Activating user with ID: {}\", userId);\n\n        UserResponseDTO activatedUser = userService.activateUser(userId);\n        \n        ApiResponse<UserResponseDTO> response = ApiResponse.<UserResponseDTO>builder()\n            .success(true)\n            .data(activatedUser)\n            .message(\"User activated successfully\")\n            .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @Operation(summary = \"Deactivate user\", description = \"Deactivate a user account\")\n    @PostMapping(\"/{userId}/deactivate\")\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public ResponseEntity<ApiResponse<UserResponseDTO>> deactivateUser(@PathVariable UUID userId) {\n        \n        log.info(\"Deactivating user with ID: {}\", userId);\n\n        UserResponseDTO deactivatedUser = userService.deactivateUser(userId);\n        \n        ApiResponse<UserResponseDTO> response = ApiResponse.<UserResponseDTO>builder()\n            .success(true)\n            .data(deactivatedUser)\n            .message(\"User deactivated successfully\")\n            .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @Operation(summary = \"Change user password\", description = \"Change user password\")\n    @PostMapping(\"/{userId}/change-password\")\n    @PreAuthorize(\"@userService.isOwnerOrSameUser(authentication.name, #userId)\")\n    public ResponseEntity<ApiResponse<Void>> changePassword(\n            @PathVariable UUID userId,\n            @Valid @RequestBody PasswordChangeDTO passwordChangeDTO) {\n        \n        log.info(\"Changing password for user ID: {}\", userId);\n\n        userService.changePassword(userId, passwordChangeDTO);\n        \n        ApiResponse<Void> response = ApiResponse.<Void>builder()\n            .success(true)\n            .message(\"Password changed successfully\")\n            .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @Operation(summary = \"Upload user avatar\", description = \"Upload avatar image for user\")\n    @PostMapping(\"/{userId}/avatar\")\n    @PreAuthorize(\"@userService.isOwnerOrSameUser(authentication.name, #userId)\")\n    public ResponseEntity<ApiResponse<String>> uploadAvatar(\n            @PathVariable UUID userId,\n            @RequestParam(\"file\") MultipartFile file) {\n        \n        log.info(\"Uploading avatar for user ID: {}\", userId);\n\n        // Validate file\n        if (file.isEmpty()) {\n            throw new BusinessException(\"Please select a file to upload\");\n        }\n\n        if (!isValidImageFile(file)) {\n            throw new BusinessException(\"Please upload a valid image file (PNG, JPG, JPEG)\");\n        }\n\n        String avatarUrl = userService.uploadAvatar(userId, file);\n        \n        ApiResponse<String> response = ApiResponse.<String>builder()\n            .success(true)\n            .data(avatarUrl)\n            .message(\"Avatar uploaded successfully\")\n            .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @Operation(summary = \"Get user statistics\", description = \"Get user statistics and metrics\")\n    @GetMapping(\"/statistics\")\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public ResponseEntity<ApiResponse<UserStatisticsDTO>> getUserStatistics() {\n        \n        log.info(\"Retrieving user statistics\");\n\n        UserStatisticsDTO statistics = userService.getUserStatistics();\n        \n        ApiResponse<UserStatisticsDTO> response = ApiResponse.<UserStatisticsDTO>builder()\n            .success(true)\n            .data(statistics)\n            .message(\"Statistics retrieved successfully\")\n            .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @Operation(summary = \"Bulk user operations\", description = \"Perform bulk operations on multiple users\")\n    @PostMapping(\"/bulk\")\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public ResponseEntity<ApiResponse<BulkOperationResultDTO>> bulkOperation(\n            @Valid @RequestBody BulkUserOperationDTO bulkOperation) {\n        \n        log.info(\"Performing bulk operation: {} on {} users\", \n                 bulkOperation.getOperation(), bulkOperation.getUserIds().size());\n\n        BulkOperationResultDTO result = userService.performBulkOperation(bulkOperation);\n        \n        ApiResponse<BulkOperationResultDTO> response = ApiResponse.<BulkOperationResultDTO>builder()\n            .success(true)\n            .data(result)\n            .message(\"Bulk operation completed\")\n            .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @Operation(summary = \"Search users\", description = \"Advanced user search with filters\")\n    @PostMapping(\"/search\")\n    @PreAuthorize(\"hasRole('ADMIN') or hasRole('USER')\")\n    public ResponseEntity<ApiResponse<Page<UserResponseDTO>>> searchUsers(\n            @Valid @RequestBody UserSearchCriteriaDTO searchCriteria,\n            @PageableDefault(size = 20) Pageable pageable) {\n        \n        log.info(\"Searching users with criteria: {}\", searchCriteria);\n\n        Page<UserResponseDTO> users = userService.searchUsers(searchCriteria, pageable);\n        \n        ApiResponse<Page<UserResponseDTO>> response = ApiResponse.<Page<UserResponseDTO>>builder()\n            .success(true)\n            .data(users)\n            .message(\"Search completed successfully\")\n            .build();\n\n        return ResponseEntity.ok(response);\n    }\n\n    @Operation(summary = \"Export users\", description = \"Export users to various formats\")\n    @GetMapping(\"/export\")\n    @PreAuthorize(\"hasRole('ADMIN')\")\n    public CompletableFuture<ResponseEntity<byte[]>> exportUsers(\n            @RequestParam(defaultValue = \"csv\") String format,\n            @RequestParam(required = false) String search,\n            @RequestParam(required = false) String status) {\n        \n        log.info(\"Exporting users in format: {}\", format);\n\n        return userService.exportUsersAsync(format, search, status)\n            .thenApply(data -> {\n                HttpHeaders headers = new HttpHeaders();\n                headers.setContentType(MediaType.parseMediaType(\"application/octet-stream\"));\n                headers.setContentDispositionFormData(\"attachment\", \"users.\" + format);\n                \n                return ResponseEntity.ok()\n                    .headers(headers)\n                    .body(data);\n            });\n    }\n\n    // Utility methods\n    private boolean isValidImageFile(MultipartFile file) {\n        String contentType = file.getContentType();\n        return contentType != null && (\n            contentType.equals(\"image/png\") || \n            contentType.equals(\"image/jpeg\") || \n            contentType.equals(\"image/jpg\")\n        );\n    }\n\n    // Exception handling for controller-specific exceptions\n    @ExceptionHandler(BusinessException.class)\n    public ResponseEntity<ApiResponse<Void>> handleBusinessException(BusinessException ex) {\n        log.warn(\"Business exception in UserController: {}\", ex.getMessage());\n        \n        ApiResponse<Void> response = ApiResponse.<Void>builder()\n            .success(false)\n            .message(ex.getMessage())\n            .build();\n\n        return ResponseEntity.status(ex.getStatus()).body(response);\n    }\n}\n\n// API Response DTO\npackage com.alice.enterprise.dto;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport com.fasterxml.jackson.annotation.JsonInclude;\n\nimport java.time.LocalDateTime;\n\n@Data\n@Builder\n@NoArgsConstructor\n@AllArgsConstructor\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic class ApiResponse<T> {\n    private Boolean success;\n    private T data;\n    private String message;\n    private LocalDateTime timestamp;\n    private String correlationId;\n    \n    @Builder.Default\n    private LocalDateTime responseTime = LocalDateTime.now();\n\n    public static <T> ApiResponse<T> success(T data, String message) {\n        return ApiResponse.<T>builder()\n            .success(true)\n            .data(data)\n            .message(message)\n            .build();\n    }\n\n    public static <T> ApiResponse<T> error(String message) {\n        return ApiResponse.<T>builder()\n            .success(false)\n            .message(message)\n            .build();\n    }\n}\n'''",
  "id": "BLOCK-PY-00114",
  "language": "python",
  "source_file": "/storage/emulated/0/Download/integrate ideas/Generators/java_generator.py",
  "source_line": 0,
  "validation_status": "validated"
}