{
  "code": "extern \"C\" {\n\nvoid BLOCK-PY-00227_execute() {\n    def _generate_aws_terraform(self, complexity: str) -> str:\n        \"\"\"Generate AWS Terraform configuration\"\"\"\n        if complexity == 'high':\n            return \"\"\"# Production AWS Infrastructure with Terraform\n# Provider configuration\nterraform {\n  required_version = \">= 1.5\"\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 5.0\"\n    }\n    random = {\n      source  = \"hashicorp/random\"\n      version = \"~> 3.4\"\n    }\n  }\n  \n  backend \"s3\" {\n    bucket         = \"company-terraform-state\"\n    key            = \"production/terraform.tfstate\"\n    region         = \"us-east-1\"\n    encrypt        = true\n    dynamodb_table = \"terraform-locks\"\n    \n    assume_role {\n      role_arn = \"arn:aws:iam::123456789012:role/TerraformRole\"\n    }\n  }\n}\n\n# Provider configuration\nprovider \"aws\" {\n  region = var.aws_region\n  \n  default_tags {\n    tags = local.common_tags\n  }\n}\n\n# Local values\nlocals {\n  environment = var.environment\n  project     = var.project_name\n  \n  common_tags = {\n    Environment   = local.environment\n    Project       = local.project\n    ManagedBy     = \"terraform\"\n    Owner         = var.owner\n    CostCenter    = var.cost_center\n    Compliance    = var.compliance_level\n    BackupPolicy  = \"daily\"\n    MonitoringEnabled = \"true\"\n  }\n  \n  vpc_cidr = var.vpc_cidr\n  availability_zones = data.aws_availability_zones.available.names\n  \n  # Subnets calculation\n  public_subnet_cidrs  = [for i, az in local.availability_zones : cidrsubnet(local.vpc_cidr, 8, i)]\n  private_subnet_cidrs = [for i, az in local.availability_zones : cidrsubnet(local.vpc_cidr, 8, i + 10)]\n  database_subnet_cidrs = [for i, az in local.availability_zones : cidrsubnet(local.vpc_cidr, 8, i + 20)]\n}\n\n# Data sources\ndata \"aws_availability_zones\" \"available\" {\n  state = \"available\"\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\ndata \"aws_ami\" \"amazon_linux\" {\n  most_recent = true\n  owners      = [\"amazon\"]\n  \n  filter {\n    name   = \"name\"\n    values = [\"amzn2-ami-hvm-*-x86_64-gp2\"]\n  }\n  \n  filter {\n    name   = \"virtualization-type\"\n    values = [\"hvm\"]\n  }\n}\n\n# VPC Configuration\nresource \"aws_vpc\" \"main\" {\n  cidr_block           = local.vpc_cidr\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-vpc\"\n  })\n}\n\n# Internet Gateway\nresource \"aws_internet_gateway\" \"main\" {\n  vpc_id = aws_vpc.main.id\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-igw\"\n  })\n}\n\n# Public Subnets\nresource \"aws_subnet\" \"public\" {\n  count = length(local.availability_zones)\n  \n  vpc_id                  = aws_vpc.main.id\n  cidr_block              = local.public_subnet_cidrs[count.index]\n  availability_zone       = local.availability_zones[count.index]\n  map_public_ip_on_launch = true\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-public-\\${count.index + 1}\"\n    Type = \"public\"\n    Tier = \"web\"\n  })\n}\n\n# Private Subnets\nresource \"aws_subnet\" \"private\" {\n  count = length(local.availability_zones)\n  \n  vpc_id            = aws_vpc.main.id\n  cidr_block        = local.private_subnet_cidrs[count.index]\n  availability_zone = local.availability_zones[count.index]\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-private-\\${count.index + 1}\"\n    Type = \"private\"\n    Tier = \"application\"\n  })\n}\n\n# Database Subnets\nresource \"aws_subnet\" \"database\" {\n  count = length(local.availability_zones)\n  \n  vpc_id            = aws_vpc.main.id\n  cidr_block        = local.database_subnet_cidrs[count.index]\n  availability_zone = local.availability_zones[count.index]\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-database-\\${count.index + 1}\"\n    Type = \"database\"\n    Tier = \"data\"\n  })\n}\n\n# Elastic IPs for NAT Gateways\nresource \"aws_eip\" \"nat\" {\n  count = length(local.availability_zones)\n  \n  domain = \"vpc\"\n  depends_on = [aws_internet_gateway.main]\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-nat-eip-\\${count.index + 1}\"\n  })\n}\n\n# NAT Gateways\nresource \"aws_nat_gateway\" \"main\" {\n  count = length(local.availability_zones)\n  \n  allocation_id = aws_eip.nat[count.index].id\n  subnet_id     = aws_subnet.public[count.index].id\n  depends_on    = [aws_internet_gateway.main]\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-nat-\\${count.index + 1}\"\n  })\n}\n\n# Route Tables\nresource \"aws_route_table\" \"public\" {\n  vpc_id = aws_vpc.main.id\n  \n  route {\n    cidr_block = \"0.0.0.0/0\"\n    gateway_id = aws_internet_gateway.main.id\n  }\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-public-rt\"\n    Type = \"public\"\n  })\n}\n\nresource \"aws_route_table\" \"private\" {\n  count = length(local.availability_zones)\n  \n  vpc_id = aws_vpc.main.id\n  \n  route {\n    cidr_block     = \"0.0.0.0/0\"\n    nat_gateway_id = aws_nat_gateway.main[count.index].id\n  }\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-private-rt-\\${count.index + 1}\"\n    Type = \"private\"\n  })\n}\n\nresource \"aws_route_table\" \"database\" {\n  vpc_id = aws_vpc.main.id\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-database-rt\"\n    Type = \"database\"\n  })\n}\n\n# Route Table Associations\nresource \"aws_route_table_association\" \"public\" {\n  count = length(aws_subnet.public)\n  \n  subnet_id      = aws_subnet.public[count.index].id\n  route_table_id = aws_route_table.public.id\n}\n\nresource \"aws_route_table_association\" \"private\" {\n  count = length(aws_subnet.private)\n  \n  subnet_id      = aws_subnet.private[count.index].id\n  route_table_id = aws_route_table.private[count.index].id\n}\n\nresource \"aws_route_table_association\" \"database\" {\n  count = length(aws_subnet.database)\n  \n  subnet_id      = aws_subnet.database[count.index].id\n  route_table_id = aws_route_table.database.id\n}\n\n# Security Groups\nresource \"aws_security_group\" \"web\" {\n  name        = \"\\${local.project}-\\${local.environment}-web-sg\"\n  description = \"Security group for web servers\"\n  vpc_id      = aws_vpc.main.id\n  \n  ingress {\n    from_port   = 80\n    to_port     = 80\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n    description = \"HTTP\"\n  }\n  \n  ingress {\n    from_port   = 443\n    to_port     = 443\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n    description = \"HTTPS\"\n  }\n  \n  ingress {\n    from_port   = 22\n    to_port     = 22\n    protocol    = \"tcp\"\n    cidr_blocks = [var.admin_cidr]\n    description = \"SSH from admin network\"\n  }\n  \n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n    description = \"All outbound traffic\"\n  }\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-web-sg\"\n    Type = \"security-group\"\n    Tier = \"web\"\n  })\n}\n\nresource \"aws_security_group\" \"app\" {\n  name        = \"\\${local.project}-\\${local.environment}-app-sg\"\n  description = \"Security group for application servers\"\n  vpc_id      = aws_vpc.main.id\n  \n  ingress {\n    from_port       = 8000\n    to_port         = 8000\n    protocol        = \"tcp\"\n    security_groups = [aws_security_group.web.id]\n    description     = \"Application port from web tier\"\n  }\n  \n  ingress {\n    from_port   = 22\n    to_port     = 22\n    protocol    = \"tcp\"\n    cidr_blocks = [var.admin_cidr]\n    description = \"SSH from admin network\"\n  }\n  \n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n    description = \"All outbound traffic\"\n  }\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-app-sg\"\n    Type = \"security-group\"\n    Tier = \"application\"\n  })\n}\n\nresource \"aws_security_group\" \"database\" {\n  name        = \"\\${local.project}-\\${local.environment}-db-sg\"\n  description = \"Security group for database\"\n  vpc_id      = aws_vpc.main.id\n  \n  ingress {\n    from_port       = 5432\n    to_port         = 5432\n    protocol        = \"tcp\"\n    security_groups = [aws_security_group.app.id]\n    description     = \"PostgreSQL from application tier\"\n  }\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-db-sg\"\n    Type = \"security-group\"\n    Tier = \"database\"\n  })\n}\n\n# Application Load Balancer\nresource \"aws_lb\" \"main\" {\n  name               = \"\\${local.project}-\\${local.environment}-alb\"\n  internal           = false\n  load_balancer_type = \"application\"\n  security_groups    = [aws_security_group.web.id]\n  subnets            = aws_subnet.public[*].id\n  \n  enable_deletion_protection = var.enable_deletion_protection\n  \n  access_logs {\n    bucket  = aws_s3_bucket.logs.bucket\n    prefix  = \"alb\"\n    enabled = true\n  }\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-alb\"\n    Type = \"load-balancer\"\n  })\n}\n\n# RDS Subnet Group\nresource \"aws_db_subnet_group\" \"main\" {\n  name       = \"\\${local.project}-\\${local.environment}-db-subnet-group\"\n  subnet_ids = aws_subnet.database[*].id\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-db-subnet-group\"\n  })\n}\n\n# RDS Database\nresource \"random_password\" \"db_password\" {\n  length  = 32\n  special = true\n}\n\nresource \"aws_db_instance\" \"main\" {\n  identifier     = \"\\${local.project}-\\${local.environment}-db\"\n  engine         = \"postgres\"\n  engine_version = var.postgres_version\n  instance_class = var.db_instance_class\n  \n  allocated_storage     = var.db_allocated_storage\n  max_allocated_storage = var.db_max_allocated_storage\n  storage_type          = \"gp3\"\n  storage_encrypted     = true\n  kms_key_id           = aws_kms_key.main.arn\n  \n  db_name  = var.database_name\n  username = var.database_username\n  password = random_password.db_password.result\n  port     = 5432\n  \n  vpc_security_group_ids = [aws_security_group.database.id]\n  db_subnet_group_name   = aws_db_subnet_group.main.name\n  \n  backup_retention_period = var.backup_retention_period\n  backup_window          = var.backup_window\n  maintenance_window     = var.maintenance_window\n  \n  skip_final_snapshot       = false\n  final_snapshot_identifier = \"\\${local.project}-\\${local.environment}-final-snapshot-\\${formatdate(\"YYYY-MM-DD-hhmm\", timestamp())}\"\n  delete_automated_backups  = false\n  \n  performance_insights_enabled = true\n  monitoring_interval         = 60\n  monitoring_role_arn        = aws_iam_role.rds_monitoring.arn\n  \n  enabled_cloudwatch_logs_exports = [\"postgresql\"]\n  \n  tags = merge(local.common_tags, {\n    Name = \"\\${local.project}-\\${local.environment}-db\"\n    Type = \"database\"\n  })\n}\n\n# Variables\nvariable \"aws_region\" {\n  description = \"AWS region\"\n  type        = string\n  default     = \"us-east-1\"\n}\n\nvariable \"environment\" {\n  description = \"Environment name\"\n  type        = string\n}\n\nvariable \"project_name\" {\n  description = \"Project name\"\n  type        = string\n}\n\nvariable \"vpc_cidr\" {\n  description = \"CIDR block for VPC\"\n  type        = string\n  default     = \"10.0.0.0/16\"\n}\n\nvariable \"admin_cidr\" {\n  description = \"CIDR block for admin access\"\n  type        = string\n}\n\nvariable \"owner\" {\n  description = \"Owner of the resources\"\n  type        = string\n}\n\nvariable \"cost_center\" {\n  description = \"Cost center for billing\"\n  type        = string\n}\n\nvariable \"compliance_level\" {\n  description = \"Compliance level required\"\n  type        = string\n  default     = \"high\"\n}\n\n# Outputs\noutput \"vpc_id\" {\n  description = \"ID of the VPC\"\n  value       = aws_vpc.main.id\n}\n\noutput \"public_subnet_ids\" {\n  description = \"IDs of the public subnets\"\n  value       = aws_subnet.public[*].id\n}\n\noutput \"private_subnet_ids\" {\n  description = \"IDs of the private subnets\"\n  value       = aws_subnet.private[*].id\n}\n\noutput \"database_subnet_ids\" {\n  description = \"IDs of the database subnets\"\n  value       = aws_subnet.database[*].id\n}\n\noutput \"load_balancer_dns_name\" {\n  description = \"DNS name of the load balancer\"\n  value       = aws_lb.main.dns_name\n}\n\noutput \"database_endpoint\" {\n  description = \"RDS instance endpoint\"\n  value       = aws_db_instance.main.endpoint\n  sensitive   = true\n}\n\noutput \"database_port\" {\n  description = \"RDS instance port\"\n  value       = aws_db_instance.main.port\n}\"\"\"\n        \n        elif complexity == 'medium':\n            return \"\"\"# AWS Infrastructure with Terraform\nterraform {\n  required_providers {\n    aws = {\n      source  = \"hashicorp/aws\"\n      version = \"~> 5.0\"\n    }\n  }\n}\n\nprovider \"aws\" {\n  region = var.aws_region\n}\n\n# VPC\nresource \"aws_vpc\" \"main\" {\n  cidr_block           = \"10.0.0.0/16\"\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n  \n  tags = {\n    Name = \"\\${var.project_name}-vpc\"\n    Environment = var.environment\n  }\n}\n\n# Internet Gateway\nresource \"aws_internet_gateway\" \"main\" {\n  vpc_id = aws_vpc.main.id\n  \n  tags = {\n    Name = \"\\${var.project_name}-igw\"\n  }\n}\n\n# Public Subnet\nresource \"aws_subnet\" \"public\" {\n  vpc_id                  = aws_vpc.main.id\n  cidr_block              = \"10.0.1.0/24\"\n  availability_zone       = data.aws_availability_zones.available.names[0]\n  map_public_ip_on_launch = true\n  \n  tags = {\n    Name = \"\\${var.project_name}-public-subnet\"\n  }\n}\n\n# Private Subnet\nresource \"aws_subnet\" \"private\" {\n  vpc_id            = aws_vpc.main.id\n  cidr_block        = \"10.0.2.0/24\"\n  availability_zone = data.aws_availability_zones.available.names[1]\n  \n  tags = {\n    Name = \"\\${var.project_name}-private-subnet\"\n  }\n}\n\n# Route Table\nresource \"aws_route_table\" \"public\" {\n  vpc_id = aws_vpc.main.id\n  \n  route {\n    cidr_block = \"0.0.0.0/0\"\n    gateway_id = aws_internet_gateway.main.id\n  }\n  \n  tags = {\n    Name = \"\\${var.project_name}-public-rt\"\n  }\n}\n\n# Security Group\nresource \"aws_security_group\" \"web\" {\n  name        = \"\\${var.project_name}-web-sg\"\n  description = \"Security group for web servers\"\n  vpc_id      = aws_vpc.main.id\n  \n  ingress {\n    from_port   = 80\n    to_port     = 80\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n  \n  ingress {\n    from_port   = 443\n    to_port     = 443\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n  \n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = \"-1\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n  \n  tags = {\n    Name = \"\\${var.project_name}-web-sg\"\n  }\n}\n\n# Data source\ndata \"aws_availability_zones\" \"available\" {\n  state = \"available\"\n}\n\n# Variables\nvariable \"aws_region\" {\n  description = \"AWS region\"\n  type        = string\n  default     = \"us-east-1\"\n}\n\nvariable \"project_name\" {\n  description = \"Name of the project\"\n  type        = string\n}\n\nvariable \"environment\" {\n  description = \"Environment (dev, staging, prod)\"\n  type        = string\n}\n\n# Outputs\noutput \"vpc_id\" {\n  description = \"ID of the VPC\"\n  value       = aws_vpc.main.id\n}\n\noutput \"public_subnet_id\" {\n  description = \"ID of the public subnet\"\n  value       = aws_subnet.public.id\n}\"\"\"\n        \n        else:  # simple\n            return \"\"\"# Simple AWS Infrastructure\nresource \"aws_instance\" \"web\" {\n  ami           = \"ami-0abcdef1234567890\"\n  instance_type = \"t3.micro\"\n  \n  tags = {\n    Name = \"HelloWorld\"\n  }\n}\n\nresource \"aws_security_group\" \"web\" {\n  name        = \"terraform_example\"\n  description = \"Terraform example security group\"\n  \n  ingress {\n    from_port   = 80\n    to_port     = 80\n    protocol    = \"tcp\"\n    cidr_blocks = [\"0.0.0.0/0\"]\n  }\n}\"\"\"\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-PY-00227",
  "language": "python",
  "source_file": "/storage/emulated/0/Download/integrate ideas/Generators/devops_generator.py",
  "source_line": 0,
  "validation_status": "validated"
}