{
  "code": "extern \"C\" {\n\nvoid BLOCK-PY-00219_execute() {\n    def _generate_python_dockerfile(self, complexity: str) -> str:\n        \"\"\"Generate Python optimized Dockerfile\"\"\"\n        if complexity == 'high':\n            return \"\"\"# Multi-stage Python Production Dockerfile\n# Stage 1: Build stage with development tools\nFROM python:3.11-slim AS builder\n\n# Install build dependencies\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n    build-essential \\\n    gcc \\\n    python3-dev \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Set working directory\nWORKDIR /app\n\n# Copy requirements and install Python dependencies\nCOPY requirements*.txt ./\nRUN pip install --no-cache-dir --user -r requirements.txt\n\n# Stage 2: Production runtime\nFROM python:3.11-slim AS runner\n\n# Install runtime dependencies and security updates\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n    curl \\\n    tini \\\n    && apt-get upgrade -y \\\n    && rm -rf /var/lib/apt/lists/* \\\n    && apt-get clean\n\n# Create non-root user\nRUN groupadd -r appuser && useradd -r -g appuser appuser\n\n# Set working directory\nWORKDIR /app\n\n# Copy Python packages from builder\nCOPY --from=builder /root/.local /home/appuser/.local\n\n# Copy application code\nCOPY . .\nRUN chown -R appuser:appuser /app\n\n# Switch to non-root user\nUSER appuser\n\n# Add local Python packages to PATH\nENV PATH=/home/appuser/.local/bin:$PATH\nENV PYTHONPATH=/app\nENV PYTHONUNBUFFERED=1\nENV PYTHONDONTWRITEBYTECODE=1\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=10s --start-period=30s --retries=3 \\\n    CMD curl -f http://localhost:8000/health || exit 1\n\n# Expose port\nEXPOSE 8000\n\n# Use tini for proper signal handling\nENTRYPOINT [\"tini\", \"--\"]\nCMD [\"python\", \"-m\", \"gunicorn\", \"--bind\", \"0.0.0.0:8000\", \"--workers\", \"4\", \"app:app\"]\n\n# Metadata\nLABEL maintainer=\"devops@company.com\"\nLABEL version=\"1.0.0\"\nLABEL description=\"Production Python application\"\nLABEL python.version=\"3.11\"\nLABEL org.opencontainers.image.source=\"https://github.com/company/python-app\"\nLABEL security.scan=\"enabled\"\nLABEL compliance.level=\"high\"\n\n# Security: Set file permissions\nRUN chmod -R 755 /app && chmod +x /app/entrypoint.sh 2>/dev/null || true\"\"\"\n        \n        elif complexity == 'medium':\n            return \"\"\"# Python Production Dockerfile\nFROM python:3.11-slim\n\n# Install system dependencies\nRUN apt-get update && apt-get install -y --no-install-recommends \\\n    curl \\\n    && rm -rf /var/lib/apt/lists/*\n\n# Create non-root user\nRUN groupadd -r appuser && useradd -r -g appuser appuser\n\nWORKDIR /app\n\n# Copy and install Python dependencies\nCOPY requirements.txt .\nRUN pip install --no-cache-dir -r requirements.txt\n\n# Copy application code\nCOPY . .\nRUN chown -R appuser:appuser /app\n\n# Switch to non-root user\nUSER appuser\n\n# Environment variables\nENV PYTHONUNBUFFERED=1\nENV PYTHONDONTWRITEBYTECODE=1\n\n# Health check\nHEALTHCHECK --interval=30s --timeout=10s \\\n    CMD curl -f http://localhost:8000/health || exit 1\n\n# Expose port and start application\nEXPOSE 8000\nCMD [\"gunicorn\", \"--bind\", \"0.0.0.0:8000\", \"app:app\"]\"\"\"\n        \n        else:  # simple\n            return \"\"\"# Simple Python Dockerfile  \nFROM python:3.11-slim\n\nWORKDIR /app\n\n# Copy and install dependencies\nCOPY requirements.txt .\nRUN pip install -r requirements.txt\n\n# Copy application code\nCOPY . .\n\n# Expose port\nEXPOSE 8000\n\n# Start application\nCMD [\"python\", \"app.py\"]\"\"\"\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-PY-00219",
  "language": "python",
  "source_file": "/storage/emulated/0/Download/integrate ideas/Generators/devops_generator.py",
  "source_line": 0,
  "validation_status": "validated"
}