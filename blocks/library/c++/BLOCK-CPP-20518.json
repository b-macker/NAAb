{
  "code": "{\n    Sema &S;\n    Sema::ContextRAII SavedContext;\n    bool PushedCodeSynthesisContext = false;\n\n  public:\n    SynthesizedFunctionScope(Sema &S, DeclContext *DC)\n        : S(S), SavedContext(S, DC) {\n      auto *FD = dyn_cast<FunctionDecl>(DC);\n      S.PushFunctionScope();\n      S.PushExpressionEvaluationContext(\n          (FD && FD->isConsteval())\n              ? ExpressionEvaluationContext::ImmediateFunctionContext\n              : ExpressionEvaluationContext::PotentiallyEvaluated);\n      if (FD) {\n        FD->setWillHaveBody(true);\n        S.ExprEvalContexts.back().InImmediateFunctionContext =\n            FD->isImmediateFunction();\n        S.ExprEvalContexts.back().InImmediateEscalatingFunctionContext =\n            S.getLangOpts().CPlusPlus20 && FD->isImmediateEscalating();\n      } else\n        assert(isa<ObjCMethodDecl>(DC));\n    }\n\n    void addContextNote(SourceLocation UseLoc) {\n      assert(!PushedCodeSynthesisContext);\n\n      Sema::CodeSynthesisContext Ctx;\n      Ctx.Kind = Sema::CodeSynthesisContext::DefiningSynthesizedFunction;\n      Ctx.PointOfInstantiation = UseLoc;\n      Ctx.Entity = cast<Decl>(S.CurContext);\n      S.pushCodeSynthesisContext(Ctx);\n\n      PushedCodeSynthesisContext = true;\n    }\n\n    ~SynthesizedFunctionScope() {\n      if (PushedCodeSynthesisContext)\n        S.popCodeSynthesisContext();\n      if (auto *FD = dyn_cast<FunctionDecl>(S.CurContext)) {\n        FD->setWillHaveBody(false);\n        S.CheckImmediateEscalatingFunctionDefinition(FD, S.getCurFunction());\n      }\n      S.PopExpressionEvaluationContext();\n      S.PopFunctionScopeInfo();\n    }\n  }",
  "id": "BLOCK-CPP-20518",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Sema/Sema.h",
  "source_line": 1076,
  "validation_status": "validated"
}