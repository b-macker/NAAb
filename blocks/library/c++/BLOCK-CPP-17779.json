{
  "code": "{\nnamespace driver {\n\n/// InputInfo - Wrapper for information about an input source.\nclass InputInfo {\n  // FIXME: The distinction between filenames and inputarg here is\n  // gross; we should probably drop the idea of a \"linker\n  // input\". Doing so means tweaking pipelining to still create link\n  // steps when it sees linker inputs (but not treat them as\n  // arguments), and making sure that arguments get rendered\n  // correctly.\n  enum Class {\n    Nothing,\n    Filename,\n    InputArg,\n    Pipe\n  };\n\n  union {\n    const char *Filename;\n    const llvm::opt::Arg *InputArg;\n  } Data;\n  Class Kind;\n  const Action* Act;\n  types::ID Type;\n  const char *BaseInput;\n\n  static types::ID GetActionType(const Action *A) {\n    return A != nullptr ? A->getType() : types::TY_Nothing;\n  }\n\npublic:\n  InputInfo() : InputInfo(nullptr, nullptr) {}\n  InputInfo(const Action *A, const char *_BaseInput)\n      : Kind(Nothing), Act(A), Type(GetActionType(A)), BaseInput(_BaseInput) {}\n\n  InputInfo(types::ID _Type, const char *_Filename, const char *_BaseInput)\n      : Kind(Filename), Act(nullptr), Type(_Type), BaseInput(_BaseInput) {\n    Data.Filename = _Filename;\n  }\n  InputInfo(const Action *A, const char *_Filename, const char *_BaseInput)\n      : Kind(Filename), Act(A), Type(GetActionType(A)), BaseInput(_BaseInput) {\n    Data.Filename = _Filename;\n  }\n\n  InputInfo(types::ID _Type, const llvm::opt::Arg *_InputArg,\n            const char *_BaseInput)\n      : Kind(InputArg), Act(nullptr), Type(_Type), BaseInput(_BaseInput) {\n    Data.InputArg = _InputArg;\n  }\n  InputInfo(const Action *A, const llvm::opt::Arg *_InputArg,\n            const char *_BaseInput)\n      : Kind(InputArg), Act(A), Type(GetActionType(A)), BaseInput(_BaseInput) {\n    Data.InputArg = _InputArg;\n  }\n\n  bool isNothing() const { return Kind == Nothing; }\n  bool isFilename() const { return Kind == Filename; }\n  bool isInputArg() const { return Kind == InputArg; }\n  types::ID getType() const { return Type; }\n  const char *getBaseInput() const { return BaseInput; }\n  /// The action for which this InputInfo was created.  May be null.\n  const Action *getAction() const { return Act; }\n  void setAction(const Action *A) { Act = A; }\n\n  const char *getFilename() const {\n    assert(isFilename() && \"Invalid accessor.\");\n    return Data.Filename;\n  }\n  const llvm::opt::Arg &getInputArg() const {\n    assert(isInputArg() && \"Invalid accessor.\");\n    return *Data.InputArg;\n  }\n\n  /// getAsString - Return a string name for this input, for\n  /// debugging.\n  std::string getAsString() const {\n    if (isFilename())\n      return std::string(\"\\\"\") + getFilename() + '\"';\n    else if (isInputArg())\n      return \"(input arg)\";\n    else\n      return \"(nothing)\";\n  }\n};\n\n} // end namespace driver\n}",
  "id": "BLOCK-CPP-17779",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Driver/InputInfo.h",
  "source_line": 18,
  "validation_status": "validated"
}