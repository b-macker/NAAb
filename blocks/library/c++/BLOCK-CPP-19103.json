{
  "code": "{\n    enum ModuleDeclState : int {\n      NotAModuleDecl,\n      FoundExport,\n      InterfaceCandidate,\n      ImplementationCandidate,\n      NamedModuleInterface,\n      NamedModuleImplementation,\n    };\n\n  public:\n    ModuleDeclSeq() = default;\n\n    void handleExport() {\n      if (State == NotAModuleDecl)\n        State = FoundExport;\n      else if (!isNamedModule())\n        reset();\n    }\n\n    void handleModule() {\n      if (State == FoundExport)\n        State = InterfaceCandidate;\n      else if (State == NotAModuleDecl)\n        State = ImplementationCandidate;\n      else if (!isNamedModule())\n        reset();\n    }\n\n    void handleIdentifier(IdentifierInfo *Identifier) {\n      if (isModuleCandidate() && Identifier)\n        Name += Identifier->getName().str();\n      else if (!isNamedModule())\n        reset();\n    }\n\n    void handleColon() {\n      if (isModuleCandidate())\n        Name += \":\";\n      else if (!isNamedModule())\n        reset();\n    }\n\n    void handlePeriod() {\n      if (isModuleCandidate())\n        Name += \".\";\n      else if (!isNamedModule())\n        reset();\n    }\n\n    void handleSemi() {\n      if (!Name.empty() && isModuleCandidate()) {\n        if (State == InterfaceCandidate)\n          State = NamedModuleInterface;\n        else if (State == ImplementationCandidate)\n          State = NamedModuleImplementation;\n        else\n          llvm_unreachable(\"Unimaged ModuleDeclState.\");\n      } else if (!isNamedModule())\n        reset();\n    }\n\n    void handleMisc() {\n      if (!isNamedModule())\n        reset();\n    }\n\n    bool isModuleCandidate() const {\n      return State == InterfaceCandidate || State == ImplementationCandidate;\n    }\n\n    bool isNamedModule() const {\n      return State == NamedModuleInterface ||\n             State == NamedModuleImplementation;\n    }\n\n    bool isNamedInterface() const { return State == NamedModuleInterface; }\n\n    bool isImplementationUnit() const {\n      return State == NamedModuleImplementation && !getName().contains(':');\n    }\n\n    StringRef getName() const {\n      assert(isNamedModule() && \"Can't get name from a non named module\");\n      return Name;\n    }\n\n    StringRef getPrimaryName() const {\n      assert(isNamedModule() && \"Can't get name from a non named module\");\n      return getName().split(':').first;\n    }\n\n    void reset() {\n      Name.clear();\n      State = NotAModuleDecl;\n    }\n\n  private:\n    ModuleDeclState State = NotAModuleDecl;\n    std::string Name;\n  }",
  "id": "BLOCK-CPP-19103",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Lex/Preprocessor.h",
  "source_line": 491,
  "validation_status": "validated"
}