{
  "code": "{\n    struct SpecifierInfo {\n      DeclContext* DeclCtx;\n      NestedNameSpecifier* NameSpecifier;\n      unsigned EditDistance;\n    };\n\n    typedef SmallVector<DeclContext*, 4> DeclContextList;\n    typedef SmallVector<SpecifierInfo, 16> SpecifierInfoList;\n\n    ASTContext &Context;\n    DeclContextList CurContextChain;\n    std::string CurNameSpecifier;\n    SmallVector<const IdentifierInfo*, 4> CurContextIdentifiers;\n    SmallVector<const IdentifierInfo*, 4> CurNameSpecifierIdentifiers;\n\n    std::map<unsigned, SpecifierInfoList> DistanceMap;\n\n    /// Helper for building the list of DeclContexts between the current\n    /// context and the top of the translation unit\n    static DeclContextList buildContextChain(DeclContext *Start);\n\n    unsigned buildNestedNameSpecifier(DeclContextList &DeclChain,\n                                      NestedNameSpecifier *&NNS);\n\n   public:\n    NamespaceSpecifierSet(ASTContext &Context, DeclContext *CurContext,\n                          CXXScopeSpec *CurScopeSpec);\n\n    /// Add the DeclContext (a namespace or record) to the set, computing\n    /// the corresponding NestedNameSpecifier and its distance in the process.\n    void addNameSpecifier(DeclContext *Ctx);\n\n    /// Provides flat iteration over specifiers, sorted by distance.\n    class iterator\n        : public llvm::iterator_facade_base<iterator, std::forward_iterator_tag,\n                                            SpecifierInfo> {\n      /// Always points to the last element in the distance map.\n      const std::map<unsigned, SpecifierInfoList>::iterator OuterBack;\n      /// Iterator on the distance map.\n      std::map<unsigned, SpecifierInfoList>::iterator Outer;\n      /// Iterator on an element in the distance map.\n      SpecifierInfoList::iterator Inner;\n\n    public:\n      iterator(NamespaceSpecifierSet &Set, bool IsAtEnd)\n          : OuterBack(std::prev(Set.DistanceMap.end())),\n            Outer(Set.DistanceMap.begin()),\n            Inner(!IsAtEnd ? Outer->second.begin() : OuterBack->second.end()) {\n        assert(!Set.DistanceMap.empty());\n      }\n\n      iterator &operator++() {\n        ++Inner;\n        if (Inner == Outer->second.end() && Outer != OuterBack) {\n          ++Outer;\n          Inner = Outer->second.begin();\n        }\n        return *this;\n      }\n\n      SpecifierInfo &operator*() { return *Inner; }\n      bool operator==(const iterator &RHS) const { return Inner == RHS.Inner; }\n    };\n\n    iterator begin() { return iterator(*this, /*IsAtEnd=*/false); }\n    iterator end() { return iterator(*this, /*IsAtEnd=*/true); }\n  }",
  "id": "BLOCK-CPP-20651",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Sema/SemaInternal.h",
  "source_line": 212,
  "validation_status": "validated"
}