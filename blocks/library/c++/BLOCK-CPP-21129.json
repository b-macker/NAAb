{
  "code": "#include \"clang/Tooling/ArgumentsAdjusters.h\"\n#include \"clang/Tooling/Execution.h\"\n#include <optional>\n\nusing namespace clang;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-21129_execute() {\n    {\nnamespace tooling {\n\n/// Executes given frontend actions on all files/TUs in the compilation\n/// database.\nclass AllTUsToolExecutor : public ToolExecutor {\npublic:\n  static const char *ExecutorName;\n\n  /// Init with \\p CompilationDatabase.\n  /// This uses \\p ThreadCount threads to exececute the actions on all files in\n  /// parallel. If \\p ThreadCount is 0, this uses `llvm::hardware_concurrency`.\n  AllTUsToolExecutor(const CompilationDatabase &Compilations,\n                     unsigned ThreadCount,\n                     std::shared_ptr<PCHContainerOperations> PCHContainerOps =\n                         std::make_shared<PCHContainerOperations>());\n\n  /// Init with \\p CommonOptionsParser. This is expected to be used by\n  /// `createExecutorFromCommandLineArgs` based on commandline options.\n  ///\n  /// The executor takes ownership of \\p Options.\n  AllTUsToolExecutor(CommonOptionsParser Options, unsigned ThreadCount,\n                     std::shared_ptr<PCHContainerOperations> PCHContainerOps =\n                         std::make_shared<PCHContainerOperations>());\n\n  StringRef getExecutorName() const override { return ExecutorName; }\n\n  using ToolExecutor::execute;\n\n  llvm::Error\n  execute(llvm::ArrayRef<\n          std::pair<std::unique_ptr<FrontendActionFactory>, ArgumentsAdjuster>>\n              Actions) override;\n\n  ExecutionContext *getExecutionContext() override { return &Context; };\n\n  ToolResults *getToolResults() override { return Results.get(); }\n\n  void mapVirtualFile(StringRef FilePath, StringRef Content) override {\n    OverlayFiles[FilePath] = std::string(Content);\n  }\n\nprivate:\n  // Used to store the parser when the executor is initialized with parser.\n  std::optional<CommonOptionsParser> OptionsParser;\n  const CompilationDatabase &Compilations;\n  std::unique_ptr<ToolResults> Results;\n  ExecutionContext Context;\n  llvm::StringMap<std::string> OverlayFiles;\n  unsigned ThreadCount;\n};\n\nextern llvm::cl::opt<unsigned> ExecutorConcurrency;\nextern llvm::cl::opt<std::string> Filter;\n\n} // end namespace tooling\n}\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-21129",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Tooling/AllTUsExecution.h",
  "source_line": 21,
  "validation_status": "validated"
}