{
  "code": "#include \"clang/AST/ASTImporterSharedState.h\"\n#include \"clang/Analysis/MacroExpansionContext.h\"\n#include \"clang/Basic/LLVM.h\"\n#include \"llvm/ADT/DenseMap.h\"\n#include \"llvm/ADT/SmallPtrSet.h\"\n#include \"llvm/ADT/StringMap.h\"\n#include \"llvm/Support/Error.h\"\n#include \"llvm/Support/Path.h\"\n#include <optional>\n\nusing namespace clang;\nusing namespace cross_tu;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-17625_execute() {\n    {\n  public:\n    ASTUnitStorage(CompilerInstance &CI);\n    /// Loads an ASTUnit for a function.\n    ///\n    /// \\param FunctionName USR name of the function.\n    /// \\param CrossTUDir Path to the directory used to store CTU related files.\n    /// \\param IndexName Name of the file inside \\p CrossTUDir which maps\n    /// function USR names to file paths. These files contain the corresponding\n    /// AST-dumps.\n    /// \\param DisplayCTUProgress Display a message about loading new ASTs.\n    ///\n    /// \\return An Expected instance which contains the ASTUnit pointer or the\n    /// error occurred during the load.\n    llvm::Expected<ASTUnit *> getASTUnitForFunction(StringRef FunctionName,\n                                                    StringRef CrossTUDir,\n                                                    StringRef IndexName,\n                                                    bool DisplayCTUProgress);\n    /// Identifies the path of the file which can be used to load the ASTUnit\n    /// for a given function.\n    ///\n    /// \\param FunctionName USR name of the function.\n    /// \\param CrossTUDir Path to the directory used to store CTU related files.\n    /// \\param IndexName Name of the file inside \\p CrossTUDir which maps\n    /// function USR names to file paths. These files contain the corresponding\n    /// AST-dumps.\n    ///\n    /// \\return An Expected instance containing the filepath.\n    llvm::Expected<std::string> getFileForFunction(StringRef FunctionName,\n                                                   StringRef CrossTUDir,\n                                                   StringRef IndexName);\n\n  private:\n    llvm::Error ensureCTUIndexLoaded(StringRef CrossTUDir, StringRef IndexName);\n    llvm::Expected<ASTUnit *> getASTUnitForFile(StringRef FileName,\n                                                bool DisplayCTUProgress);\n\n    template <typename... T> using BaseMapTy = llvm::StringMap<T...>;\n    using OwningMapTy = BaseMapTy<std::unique_ptr<clang::ASTUnit>>;\n    using NonOwningMapTy = BaseMapTy<clang::ASTUnit *>;\n\n    OwningMapTy FileASTUnitMap;\n    NonOwningMapTy NameASTUnitMap;\n\n    using IndexMapTy = BaseMapTy<std::string>;\n    IndexMapTy NameFileMap;\n\n    /// Loads the AST based on the identifier found in the index.\n    ASTLoader Loader;\n\n    /// Limit the number of loaded ASTs. It is used to limit the  memory usage\n    /// of the CrossTranslationUnitContext. The ASTUnitStorage has the\n    /// information whether the AST to load is actually loaded or returned from\n    /// cache. This information is needed to maintain the counter.\n    ASTLoadGuard LoadGuard;\n  }\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-17625",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/CrossTU/CrossTranslationUnit.h",
  "source_line": 291,
  "validation_status": "validated"
}