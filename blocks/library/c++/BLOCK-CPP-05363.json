{
  "code": "{\nABSL_NAMESPACE_BEGIN\nnamespace container_internal {\n\n// A class that tracks its copies and moves so that it can be queried in tests.\ntemplate <class T>\nclass Tracked {\n public:\n  Tracked() {}\n  // NOLINTNEXTLINE(runtime/explicit)\n  Tracked(const T& val) : val_(val) {}\n  Tracked(const Tracked& that)\n      : val_(that.val_),\n        num_moves_(that.num_moves_),\n        num_copies_(that.num_copies_) {\n    ++(*num_copies_);\n  }\n  Tracked(Tracked&& that)\n      : val_(std::move(that.val_)),\n        num_moves_(std::move(that.num_moves_)),\n        num_copies_(std::move(that.num_copies_)) {\n    ++(*num_moves_);\n  }\n  Tracked& operator=(const Tracked& that) {\n    val_ = that.val_;\n    num_moves_ = that.num_moves_;\n    num_copies_ = that.num_copies_;\n    ++(*num_copies_);\n  }\n  Tracked& operator=(Tracked&& that) {\n    val_ = std::move(that.val_);\n    num_moves_ = std::move(that.num_moves_);\n    num_copies_ = std::move(that.num_copies_);\n    ++(*num_moves_);\n  }\n\n  const T& val() const { return val_; }\n\n  friend bool operator==(const Tracked& a, const Tracked& b) {\n    return a.val_ == b.val_;\n  }\n  friend bool operator!=(const Tracked& a, const Tracked& b) {\n    return !(a == b);\n  }\n\n  size_t num_copies() { return *num_copies_; }\n  size_t num_moves() { return *num_moves_; }\n\n private:\n  T val_;\n  std::shared_ptr<size_t> num_moves_ = std::make_shared<size_t>(0);\n  std::shared_ptr<size_t> num_copies_ = std::make_shared<size_t>(0);\n};\n\n}  // namespace container_internal\nABSL_NAMESPACE_END\n}",
  "id": "BLOCK-CPP-05363",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/container/internal/tracked.h",
  "source_line": 25,
  "validation_status": "validated"
}