{
  "code": "{\n  using IDFCalculator = llvm::IDFCalculatorBase<CFGBlock, /*IsPostDom=*/true>;\n  using CFGBlockVector = llvm::SmallVector<CFGBlock *, 4>;\n  using CFGBlockSet = llvm::SmallPtrSet<CFGBlock *, 4>;\n\n  CFGPostDomTree PostDomTree;\n  IDFCalculator IDFCalc;\n\n  llvm::DenseMap<CFGBlock *, CFGBlockVector> ControlDepenencyMap;\n\npublic:\n  ControlDependencyCalculator(CFG *cfg)\n    : PostDomTree(cfg), IDFCalc(PostDomTree.getBase()) {}\n\n  const CFGPostDomTree &getCFGPostDomTree() const { return PostDomTree; }\n\n  // Lazily retrieves the set of control dependencies to \\p A.\n  const CFGBlockVector &getControlDependencies(CFGBlock *A) {\n    auto It = ControlDepenencyMap.find(A);\n    if (It == ControlDepenencyMap.end()) {\n      CFGBlockSet DefiningBlock = {A};\n      IDFCalc.setDefiningBlocks(DefiningBlock);\n\n      CFGBlockVector ControlDependencies;\n      IDFCalc.calculate(ControlDependencies);\n\n      It = ControlDepenencyMap.insert({A, ControlDependencies}).first;\n    }\n\n    assert(It != ControlDepenencyMap.end());\n    return It->second;\n  }\n\n  /// Whether \\p A is control dependent on \\p B.\n  bool isControlDependent(CFGBlock *A, CFGBlock *B) {\n    return llvm::is_contained(getControlDependencies(A), B);\n  }\n\n  // Dumps immediate control dependencies for each block.\n  LLVM_DUMP_METHOD void dump() {\n    CFG *cfg = PostDomTree.getCFG();\n    llvm::errs() << \"Control dependencies (Node#,Dependency#):\\n\";\n    for (CFGBlock *BB : *cfg) {\n\n      assert(BB &&\n             \"LLVM's Dominator tree builder uses nullpointers to signify the \"\n             \"virtual root!\");\n\n      for (CFGBlock *isControlDependency : getControlDependencies(BB))\n        llvm::errs() << \"(\" << BB->getBlockID()\n                     << \",\"\n                     << isControlDependency->getBlockID()\n                     << \")\\n\";\n    }\n  }\n}",
  "id": "BLOCK-CPP-21356",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Analysis/Analyses/Dominators.h",
  "source_line": 215,
  "validation_status": "validated"
}