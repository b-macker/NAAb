{
  "code": "{\npublic:\n\nprivate:\n  ASTContext &Context;\n\n  typedef llvm::DenseMap<GlobalDecl, MethodVFTableLocation>\n    MethodVFTableLocationsTy;\n  MethodVFTableLocationsTy MethodVFTableLocations;\n\n  typedef llvm::DenseMap<const CXXRecordDecl *, std::unique_ptr<VPtrInfoVector>>\n      VFPtrLocationsMapTy;\n  VFPtrLocationsMapTy VFPtrLocations;\n\n  typedef std::pair<const CXXRecordDecl *, CharUnits> VFTableIdTy;\n  typedef llvm::DenseMap<VFTableIdTy, std::unique_ptr<const VTableLayout>>\n      VFTableLayoutMapTy;\n  VFTableLayoutMapTy VFTableLayouts;\n\n  llvm::DenseMap<const CXXRecordDecl *, std::unique_ptr<VirtualBaseInfo>>\n      VBaseInfo;\n\n  void computeVTableRelatedInformation(const CXXRecordDecl *RD) override;\n\n  void dumpMethodLocations(const CXXRecordDecl *RD,\n                           const MethodVFTableLocationsTy &NewMethods,\n                           raw_ostream &);\n\n  const VirtualBaseInfo &\n  computeVBTableRelatedInformation(const CXXRecordDecl *RD);\n\n  void computeVTablePaths(bool ForVBTables, const CXXRecordDecl *RD,\n                          VPtrInfoVector &Paths);\n\npublic:\n  MicrosoftVTableContext(ASTContext &Context)\n      : VTableContextBase(/*MS=*/true), Context(Context) {}\n\n  ~MicrosoftVTableContext() override;\n\n  const VPtrInfoVector &getVFPtrOffsets(const CXXRecordDecl *RD);\n\n  const VTableLayout &getVFTableLayout(const CXXRecordDecl *RD,\n                                       CharUnits VFPtrOffset);\n\n  MethodVFTableLocation getMethodVFTableLocation(GlobalDecl GD);\n\n  const ThunkInfoVectorTy *getThunkInfo(GlobalDecl GD) override {\n    // Complete destructors don't have a slot in a vftable, so no thunks needed.\n    if (isa<CXXDestructorDecl>(GD.getDecl()) &&\n        GD.getDtorType() == Dtor_Complete)\n      return nullptr;\n    return VTableContextBase::getThunkInfo(GD);\n  }\n\n  /// Returns the index of VBase in the vbtable of Derived.\n  /// VBase must be a morally virtual base of Derived.\n  /// The vbtable is an array of i32 offsets.  The first entry is a self entry,\n  /// and the rest are offsets from the vbptr to virtual bases.\n  unsigned getVBTableIndex(const CXXRecordDecl *Derived,\n                           const CXXRecordDecl *VBase);\n\n  const VPtrInfoVector &enumerateVBTables(const CXXRecordDecl *RD);\n\n  static bool classof(const VTableContextBase *VT) { return VT->isMicrosoft(); }\n}",
  "id": "BLOCK-CPP-14659",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/AST/VTableBuilder.h",
  "source_line": 544,
  "validation_status": "validated"
}