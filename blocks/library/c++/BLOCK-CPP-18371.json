{
  "code": "{\n  struct DiagEntry {\n    /// The primary message line of the diagnostic.\n    std::string Message;\n\n    /// The source file name, if available.\n    std::string Filename;\n\n    /// The source file line number, if available.\n    unsigned Line;\n\n    /// The source file column number, if available.\n    unsigned Column;\n\n    /// The ID of the diagnostic.\n    unsigned DiagnosticID;\n\n    /// The Option Flag for the diagnostic\n    std::string WarningOption;\n\n    /// The level of the diagnostic.\n    DiagnosticsEngine::Level DiagnosticLevel;\n  };\n\n  void EmitDiagEntry(llvm::raw_ostream &OS,\n                     const LogDiagnosticPrinter::DiagEntry &DE);\n\n  // Conditional ownership (when StreamOwner is non-null, it's keeping OS\n  // alive). We might want to replace this with a wrapper for conditional\n  // ownership eventually - it seems to pop up often enough.\n  raw_ostream &OS;\n  std::unique_ptr<raw_ostream> StreamOwner;\n  const LangOptions *LangOpts;\n  IntrusiveRefCntPtr<DiagnosticOptions> DiagOpts;\n\n  SourceLocation LastWarningLoc;\n  FullSourceLoc LastLoc;\n\n  SmallVector<DiagEntry, 8> Entries;\n\n  std::string MainFilename;\n  std::string DwarfDebugFlags;\n\npublic:\n  LogDiagnosticPrinter(raw_ostream &OS, DiagnosticOptions *Diags,\n                       std::unique_ptr<raw_ostream> StreamOwner);\n\n  void setDwarfDebugFlags(StringRef Value) {\n    DwarfDebugFlags = std::string(Value);\n  }\n\n  void BeginSourceFile(const LangOptions &LO, const Preprocessor *PP) override {\n    LangOpts = &LO;\n  }\n\n  void EndSourceFile() override;\n\n  void HandleDiagnostic(DiagnosticsEngine::Level DiagLevel,\n                        const Diagnostic &Info) override;\n}",
  "id": "BLOCK-CPP-18371",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Frontend/LogDiagnosticPrinter.h",
  "source_line": 21,
  "validation_status": "validated"
}