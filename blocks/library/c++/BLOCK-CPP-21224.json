{
  "code": "{\nnamespace tooling {\n\n/// A standalone executor that runs FrontendActions on a given set of\n/// TUs in sequence.\n///\n/// By default, this executor uses the following arguments adjusters (as defined\n/// in `clang/Tooling/ArgumentsAdjusters.h`):\n///   - `getClangStripOutputAdjuster()`\n///   - `getClangSyntaxOnlyAdjuster()`\n///   - `getClangStripDependencyFileAdjuster()`\nclass StandaloneToolExecutor : public ToolExecutor {\npublic:\n  static const char *ExecutorName;\n\n  /// Init with \\p CompilationDatabase and the paths of all files to be\n  /// proccessed.\n  StandaloneToolExecutor(\n      const CompilationDatabase &Compilations,\n      llvm::ArrayRef<std::string> SourcePaths,\n      IntrusiveRefCntPtr<llvm::vfs::FileSystem> BaseFS =\n          llvm::vfs::getRealFileSystem(),\n      std::shared_ptr<PCHContainerOperations> PCHContainerOps =\n          std::make_shared<PCHContainerOperations>());\n\n  /// Init with \\p CommonOptionsParser. This is expected to be used by\n  /// `createExecutorFromCommandLineArgs` based on commandline options.\n  ///\n  /// The executor takes ownership of \\p Options.\n  StandaloneToolExecutor(\n      CommonOptionsParser Options,\n      std::shared_ptr<PCHContainerOperations> PCHContainerOps =\n          std::make_shared<PCHContainerOperations>());\n\n  StringRef getExecutorName() const override { return ExecutorName; }\n\n  using ToolExecutor::execute;\n\n  llvm::Error\n  execute(llvm::ArrayRef<\n          std::pair<std::unique_ptr<FrontendActionFactory>, ArgumentsAdjuster>>\n              Actions) override;\n\n  /// Set a \\c DiagnosticConsumer to use during parsing.\n  void setDiagnosticConsumer(DiagnosticConsumer *DiagConsumer) {\n    Tool.setDiagnosticConsumer(DiagConsumer);\n  }\n\n  ExecutionContext *getExecutionContext() override { return &Context; };\n\n  ToolResults *getToolResults() override { return &Results; }\n\n  llvm::ArrayRef<std::string> getSourcePaths() const {\n    return Tool.getSourcePaths();\n  }\n\n  void mapVirtualFile(StringRef FilePath, StringRef Content) override {\n    Tool.mapVirtualFile(FilePath, Content);\n  }\n\n  /// Returns the file manager used in the tool.\n  ///\n  /// The file manager is shared between all translation units.\n  FileManager &getFiles() { return Tool.getFiles(); }\n\nprivate:\n  // Used to store the parser when the executor is initialized with parser.\n  std::optional<CommonOptionsParser> OptionsParser;\n  // FIXME: The standalone executor is currently just a wrapper of `ClangTool`.\n  // Merge `ClangTool` implementation into the this.\n  ClangTool Tool;\n  ExecutionContext Context;\n  InMemoryToolResults Results;\n  ArgumentsAdjuster ArgsAdjuster;\n};\n\n} // end namespace tooling\n}",
  "id": "BLOCK-CPP-21224",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Tooling/StandaloneExecution.h",
  "source_line": 20,
  "validation_status": "validated"
}