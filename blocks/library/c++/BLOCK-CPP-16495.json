{
  "code": "#include \"clang/Basic/LLVM.h\"\n#include \"clang/Basic/SourceManager.h\"\n#include \"llvm/ADT/StringRef.h\"\n#include \"llvm/Support/Path.h\"\n#include \"llvm/Support/raw_ostream.h\"\n#include <iterator>\n\nusing namespace clang;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-16495_execute() {\n    {\n  // Mostly copy-pasted from SourceLocation::print.\n  if (!Loc.isValid()) {\n    Out << \"null\";\n    return;\n  }\n\n  if (Loc.isFileID()) {\n    PresumedLoc PLoc = SM.getPresumedLoc(Loc);\n\n    if (PLoc.isInvalid()) {\n      Out << \"null\";\n      return;\n    }\n    // The macro expansion and spelling pos is identical for file locs.\n    if (AddBraces)\n      Out << \"{ \";\n    std::string filename(PLoc.getFilename());\n    if (is_style_windows(llvm::sys::path::Style::native)) {\n      // Remove forbidden Windows path characters\n      llvm::erase_if(filename, [](auto Char) {\n        static const char ForbiddenChars[] = \"<>*?\\\"|\";\n        return llvm::is_contained(ForbiddenChars, Char);\n      });\n      // Handle windows-specific path delimiters.\n      std::replace(filename.begin(), filename.end(), '\\\\', '/');\n    }\n    Out << \"\\\"line\\\": \" << PLoc.getLine()\n        << \", \\\"column\\\": \" << PLoc.getColumn()\n        << \", \\\"file\\\": \\\"\" << filename << \"\\\"\";\n    if (AddBraces)\n      Out << \" }\";\n    return;\n  }\n\n  // We want 'location: { ..., spelling: { ... }}' but not\n  // 'location: { ... }, spelling: { ... }', hence the dance\n  // with braces.\n  Out << \"{ \";\n  printSourceLocationAsJson(Out, SM.getExpansionLoc(Loc), SM, false);\n  Out << \", \\\"spelling\\\": \";\n  printSourceLocationAsJson(Out, SM.getSpellingLoc(Loc), SM, true);\n  Out << \" }\";\n}\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-16495",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Basic/JsonSupport.h",
  "source_line": 82,
  "validation_status": "validated"
}