{
  "code": "{\n\n/// ExtractAPIAction sets up the output file and creates the ExtractAPIVisitor.\nclass ExtractAPIAction : public ASTFrontendAction,\n                         private ExtractAPIActionBase {\nprotected:\n  std::unique_ptr<ASTConsumer> CreateASTConsumer(CompilerInstance &CI,\n                                                 StringRef InFile) override;\n\nprivate:\n\n  /// The input file originally provided on the command line.\n  ///\n  /// This captures the spelling used to include the file and whether the\n  /// include is quoted or not.\n  SmallVector<std::pair<SmallString<32>, bool>> KnownInputFiles;\n\n  /// Prepare to execute the action on the given CompilerInstance.\n  ///\n  /// This is called before executing the action on any inputs. This generates a\n  /// single header that includes all of CI's inputs and replaces CI's input\n  /// list with it before actually executing the action.\n  bool PrepareToExecuteAction(CompilerInstance &CI) override;\n\n  /// Called after executing the action on the synthesized input buffer.\n  ///\n  /// Note: Now that we have gathered all the API definitions to surface we can\n  /// emit them in this callback.\n  void EndSourceFileAction() override;\n\n  static StringRef getInputBufferName() { return \"<extract-api-includes>\"; }\n\n  static std::unique_ptr<llvm::raw_pwrite_stream>\n  CreateOutputFile(CompilerInstance &CI, StringRef InFile);\n};\n\n/// Wrap ExtractAPIAction on top of a pre-existing action\n///\n/// Used when the ExtractAPI action needs to be executed as a side effect of a\n/// regular compilation job. Unlike ExtarctAPIAction, this is meant to be used\n/// on regular source files ( .m , .c files) instead of header files\nclass WrappingExtractAPIAction : public WrapperFrontendAction,\n                                 private ExtractAPIActionBase {\npublic:\n  WrappingExtractAPIAction(std::unique_ptr<FrontendAction> WrappedAction)\n      : WrapperFrontendAction(std::move(WrappedAction)) {}\n\nprotected:\n  /// Create ExtractAPI consumer multiplexed on another consumer.\n  ///\n  /// This allows us to execute ExtractAPI action while on top of\n  std::unique_ptr<ASTConsumer> CreateASTConsumer(CompilerInstance &CI,\n                                                 StringRef InFile) override;\n\nprivate:\n  /// Flag to check if the wrapper front end action's consumer is\n  /// craeted or not\n  bool CreatedASTConsumer = false;\n\n  void EndSourceFile() override { FrontendAction::EndSourceFile(); }\n\n  /// Called after executing the action on the synthesized input buffer.\n  ///\n  /// Executes both Wrapper and ExtractAPIBase end source file\n  /// actions. This is the place where all the gathered symbol graph\n  /// information is emited.\n  void EndSourceFileAction() override;\n\n  static std::unique_ptr<llvm::raw_pwrite_stream>\n  CreateOutputFile(CompilerInstance &CI, StringRef InFile);\n};\n\n}",
  "id": "BLOCK-CPP-18033",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/ExtractAPI/FrontendActions.h",
  "source_line": 21,
  "validation_status": "validated"
}