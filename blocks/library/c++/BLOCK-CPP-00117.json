{
  "code": "{\npublic:\n    scoped_padder(size_t wrapped_size, const padding_info &padinfo, memory_buf_t &dest)\n        : padinfo_(padinfo),\n          dest_(dest) {\n        remaining_pad_ = static_cast<long>(padinfo.width_) - static_cast<long>(wrapped_size);\n        if (remaining_pad_ <= 0) {\n            return;\n        }\n\n        if (padinfo_.side_ == padding_info::pad_side::left) {\n            pad_it(remaining_pad_);\n            remaining_pad_ = 0;\n        } else if (padinfo_.side_ == padding_info::pad_side::center) {\n            auto half_pad = remaining_pad_ / 2;\n            auto reminder = remaining_pad_ & 1;\n            pad_it(half_pad);\n            remaining_pad_ = half_pad + reminder;  // for the right side\n        }\n    }\n\n    template <typename T>\n    static unsigned int count_digits(T n) {\n        return fmt_helper::count_digits(n);\n    }\n\n    ~scoped_padder() {\n        if (remaining_pad_ >= 0) {\n            pad_it(remaining_pad_);\n        } else if (padinfo_.truncate_) {\n            long new_size = static_cast<long>(dest_.size()) + remaining_pad_;\n            dest_.resize(static_cast<size_t>(new_size));\n        }\n    }\n\nprivate:\n    void pad_it(long count) {\n        fmt_helper::append_string_view(string_view_t(spaces_.data(), static_cast<size_t>(count)),\n                                       dest_);\n    }\n\n    const padding_info &padinfo_;\n    memory_buf_t &dest_;\n    long remaining_pad_;\n    string_view_t spaces_{\"                                                                \", 64};\n}",
  "id": "BLOCK-CPP-00117",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/spdlog/include/spdlog/pattern_formatter-inl.h",
  "source_line": 37,
  "validation_status": "validated"
}