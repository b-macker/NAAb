{
  "code": "#include \"clang/AST/ASTFwd.h\"\n#include \"clang/AST/Decl.h\"\n#include \"clang/AST/DeclarationName.h\"\n#include \"clang/AST/Expr.h\"\n#include \"clang/AST/NestedNameSpecifier.h\"\n#include \"clang/AST/Stmt.h\"\n#include \"clang/AST/StmtIterator.h\"\n#include \"clang/Basic/LLVM.h\"\n#include \"clang/Basic/OpenMPKinds.h\"\n#include \"clang/Basic/SourceLocation.h\"\n#include \"llvm/ADT/ArrayRef.h\"\n#include \"llvm/ADT/MapVector.h\"\n#include \"llvm/ADT/PointerIntPair.h\"\n#include \"llvm/ADT/SmallVector.h\"\n#include \"llvm/ADT/iterator.h\"\n#include \"llvm/ADT/iterator_range.h\"\n#include \"llvm/Frontend/OpenMP/OMPAssume.h\"\n#include \"llvm/Frontend/OpenMP/OMPConstants.h\"\n#include \"llvm/Frontend/OpenMP/OMPContext.h\"\n#include \"llvm/Support/Casting.h\"\n#include \"llvm/Support/Compiler.h\"\n#include \"llvm/Support/TrailingObjects.h\"\n#include <cassert>\n#include <cstddef>\n#include <iterator>\n#include <utility>\n\nusing namespace clang;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-11951_execute() {\n    {\n    // Perform some checks to make sure the data sizes are consistent with the\n    // information available when the clause was created.\n    assert(getUniqueDeclarationsTotalNumber(Declarations) ==\n               NumUniqueDeclarations &&\n           \"Unexpected number of mappable expression info entries!\");\n    assert(getComponentsTotalNumber(ComponentLists) == NumComponents &&\n           \"Unexpected total number of components!\");\n    assert(Declarations.size() == ComponentLists.size() &&\n           \"Declaration and component lists size is not consistent!\");\n    assert(Declarations.size() == NumComponentLists &&\n           \"Unexpected declaration and component lists size!\");\n\n    // Organize the components by declaration and retrieve the original\n    // expression. Original expressions are always the first component of the\n    // mappable component list.\n    llvm::MapVector<ValueDecl *, SmallVector<MappableExprComponentListRef, 8>>\n        ComponentListMap;\n    {\n      auto CI = ComponentLists.begin();\n      for (auto DI = Declarations.begin(), DE = Declarations.end(); DI != DE;\n           ++DI, ++CI) {\n        assert(!CI->empty() && \"Invalid component list!\");\n        ComponentListMap[*DI].push_back(*CI);\n      }\n    }\n\n    // Iterators of the target storage.\n    auto UniqueDeclarations = getUniqueDeclsRef();\n    auto UDI = UniqueDeclarations.begin();\n\n    auto DeclNumLists = getDeclNumListsRef();\n    auto DNLI = DeclNumLists.begin();\n\n    auto ComponentListSizes = getComponentListSizesRef();\n    auto CLSI = ComponentListSizes.begin();\n\n    auto Components = getComponentsRef();\n    auto CI = Components.begin();\n\n    // Variable to compute the accumulation of the number of components.\n    unsigned PrevSize = 0u;\n\n    // Scan all the declarations and associated component lists.\n    for (auto &M : ComponentListMap) {\n      // The declaration.\n      auto *D = M.first;\n      // The component lists.\n      auto CL = M.second;\n\n      // Initialize the entry.\n      *UDI = D;\n      ++UDI;\n\n      *DNLI = CL.size();\n      ++DNLI;\n\n      // Obtain the cumulative sizes and concatenate all the components in the\n      // reserved storage.\n      for (auto C : CL) {\n        // Accumulate with the previous size.\n        PrevSize += C.size();\n\n        // Save the size.\n        *CLSI = PrevSize;\n        ++CLSI;\n\n        // Append components after the current components iterator.\n        CI = std::copy(C.begin(), C.end(), CI);\n      }\n    }\n  }\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-11951",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/AST/OpenMPClause.h",
  "source_line": 5339,
  "validation_status": "validated"
}