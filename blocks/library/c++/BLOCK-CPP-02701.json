{
  "code": "{\n  if (message.empty()) return;\n#if defined(__EMSCRIPTEN__)\n  // In WebAssembly, bypass filesystem emulation via fwrite.\n  // Skip a trailing newline character as emscripten_errn adds one itself.\n  const auto message_minus_newline = absl::StripSuffix(message, \"\\n\");\n  // emscripten_errn was introduced in 3.1.41 but broken in standalone mode\n  // until 3.1.43.\n#if ABSL_INTERNAL_EMSCRIPTEN_VERSION >= 3001043\n  emscripten_errn(message_minus_newline.data(), message_minus_newline.size());\n#else\n  std::string null_terminated_message(message_minus_newline);\n  _emscripten_err(null_terminated_message.c_str());\n#endif\n#else\n  // Avoid using std::cerr from this module since we may get called during\n  // exit code, and cerr may be partially or fully destroyed by then.\n  std::fwrite(message.data(), message.size(), 1, stderr);\n#endif\n\n#if defined(_WIN64) || defined(_WIN32) || defined(_WIN16)\n  // C99 requires stderr to not be fully-buffered by default (7.19.3.7), but\n  // MS CRT buffers it anyway, so we must `fflush` to ensure the string hits\n  // the console/file before the program dies (and takes the libc buffers\n  // with it).\n  // https://docs.microsoft.com/en-us/cpp/c-runtime-library/stream-i-o\n  if (severity >= absl::LogSeverity::kWarning) {\n    std::fflush(stderr);\n  }\n#else\n  // Avoid unused parameter warning in this branch.\n  (void)severity;\n#endif\n}",
  "id": "BLOCK-CPP-02701",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/log/internal/globals.cc",
  "source_line": 62,
  "validation_status": "validated"
}