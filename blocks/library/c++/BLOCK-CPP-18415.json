{
  "code": "{\nnamespace serialized_diags {\n\nenum class SDError {\n  CouldNotLoad = 1,\n  InvalidSignature,\n  InvalidDiagnostics,\n  MalformedTopLevelBlock,\n  MalformedSubBlock,\n  MalformedBlockInfoBlock,\n  MalformedMetadataBlock,\n  MalformedDiagnosticBlock,\n  MalformedDiagnosticRecord,\n  MissingVersion,\n  VersionMismatch,\n  UnsupportedConstruct,\n  /// A generic error for subclass handlers that don't want or need to define\n  /// their own error_category.\n  HandlerFailed\n};\n\nconst std::error_category &SDErrorCategory();\n\ninline std::error_code make_error_code(SDError E) {\n  return std::error_code(static_cast<int>(E), SDErrorCategory());\n}\n\n/// A location that is represented in the serialized diagnostics.\nstruct Location {\n  unsigned FileID;\n  unsigned Line;\n  unsigned Col;\n  unsigned Offset;\n\n  Location(unsigned FileID, unsigned Line, unsigned Col, unsigned Offset)\n      : FileID(FileID), Line(Line), Col(Col), Offset(Offset) {}\n};\n\n/// A base class that handles reading serialized diagnostics from a file.\n///\n/// Subclasses should override the visit* methods with their logic for handling\n/// the various constructs that are found in serialized diagnostics.\nclass SerializedDiagnosticReader {\npublic:\n  SerializedDiagnosticReader() = default;\n  virtual ~SerializedDiagnosticReader() = default;\n\n  /// Read the diagnostics in \\c File\n  std::error_code readDiagnostics(StringRef File);\n\nprivate:\n  enum class Cursor;\n\n  /// Read to the next record or block to process.\n  llvm::ErrorOr<Cursor> skipUntilRecordOrBlock(llvm::BitstreamCursor &Stream,\n                                               unsigned &BlockOrRecordId);\n\n  /// Read a metadata block from \\c Stream.\n  std::error_code readMetaBlock(llvm::BitstreamCursor &Stream);\n\n  /// Read a diagnostic block from \\c Stream.\n  std::error_code readDiagnosticBlock(llvm::BitstreamCursor &Stream);\n\nprotected:\n  /// Visit the start of a diagnostic block.\n  virtual std::error_code visitStartOfDiagnostic() { return {}; }\n\n  /// Visit the end of a diagnostic block.\n  virtual std::error_code visitEndOfDiagnostic() { return {}; }\n\n  /// Visit a category. This associates the category \\c ID to a \\c Name.\n  virtual std::error_code visitCategoryRecord(unsigned ID, StringRef Name) {\n    return {};\n  }\n\n  /// Visit a flag. This associates the flag's \\c ID to a \\c Name.\n  virtual std::error_code visitDiagFlagRecord(unsigned ID, StringRef Name) {\n    return {};\n  }\n\n  /// Visit a diagnostic.\n  virtual std::error_code\n  visitDiagnosticRecord(unsigned Severity, const Location &Location,\n                        unsigned Category, unsigned Flag, StringRef Message) {\n    return {};\n  }\n\n  /// Visit a filename. This associates the file's \\c ID to a \\c Name.\n  virtual std::error_code visitFilenameRecord(unsigned ID, unsigned Size,\n                                              unsigned Timestamp,\n                                              StringRef Name) {\n    return {};\n  }\n\n  /// Visit a fixit hint.\n  virtual std::error_code\n  visitFixitRecord(const Location &Start, const Location &End, StringRef Text) {\n    return {};\n  }\n\n  /// Visit a source range.\n  virtual std::error_code visitSourceRangeRecord(const Location &Start,\n                                                 const Location &End) {\n    return {};\n  }\n\n  /// Visit the version of the set of diagnostics.\n  virtual std::error_code visitVersionRecord(unsigned Version) { return {}; }\n};\n\n} // namespace serialized_diags\n}",
  "id": "BLOCK-CPP-18415",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Frontend/SerializedDiagnosticReader.h",
  "source_line": 18,
  "validation_status": "validated"
}