{
  "code": "#include \"clang/Basic/LLVM.h\"\n#include \"llvm/ADT/DenseMap.h\"\n#include \"llvm/ADT/PointerUnion.h\"\n#include \"llvm/ADT/STLExtras.h\"\n#include \"llvm/ADT/StringRef.h\"\n#include <memory>\n\nusing namespace llvm;\nusing namespace clang;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-06829_execute() {\n    {\n  class FileManager;\n  class FileEntry;\n  class DiagnosticsEngine;\n  class PreprocessorOptions;\n\nnamespace arcmt {\n\nclass FileRemapper {\n  // FIXME: Reuse the same FileManager for multiple ASTContexts.\n  std::unique_ptr<FileManager> FileMgr;\n\n  typedef llvm::PointerUnion<const FileEntry *, llvm::MemoryBuffer *> Target;\n  typedef llvm::DenseMap<const FileEntry *, Target> MappingsTy;\n  MappingsTy FromToMappings;\n\n  llvm::DenseMap<const FileEntry *, const FileEntry *> ToFromMappings;\n\npublic:\n  FileRemapper();\n  ~FileRemapper();\n\n  bool initFromDisk(StringRef outputDir, DiagnosticsEngine &Diag,\n                    bool ignoreIfFilesChanged);\n  bool initFromFile(StringRef filePath, DiagnosticsEngine &Diag,\n                    bool ignoreIfFilesChanged);\n  bool flushToDisk(StringRef outputDir, DiagnosticsEngine &Diag);\n  bool flushToFile(StringRef outputPath, DiagnosticsEngine &Diag);\n\n  bool overwriteOriginal(DiagnosticsEngine &Diag,\n                         StringRef outputDir = StringRef());\n\n  void remap(StringRef filePath, std::unique_ptr<llvm::MemoryBuffer> memBuf);\n\n  void applyMappings(PreprocessorOptions &PPOpts) const;\n\n  /// Iterate through all the mappings.\n  void forEachMapping(\n      llvm::function_ref<void(StringRef, StringRef)> CaptureFile,\n      llvm::function_ref<void(StringRef, const llvm::MemoryBufferRef &)>\n          CaptureBuffer) const;\n\n  void clear(StringRef outputDir = StringRef());\n\nprivate:\n  void remap(const FileEntry *file, std::unique_ptr<llvm::MemoryBuffer> memBuf);\n  void remap(const FileEntry *file, const FileEntry *newfile);\n\n  const FileEntry *getOriginalFile(StringRef filePath);\n  void resetTarget(Target &targ);\n\n  bool report(const Twine &err, DiagnosticsEngine &Diag);\n\n  std::string getRemapInfoFile(StringRef outputDir);\n};\n\n} // end namespace arcmt\n\n}\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-06829",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/ARCMigrate/FileRemapper.h",
  "source_line": 24,
  "validation_status": "validated"
}