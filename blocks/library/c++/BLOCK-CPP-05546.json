{
  "code": "{\nABSL_NAMESPACE_BEGIN\nnamespace flags_internal {\n\n// Executes specified visitor for each non-retired flag in the registry. While\n// callback are executed, the registry is locked and can't be changed.\nvoid ForEachFlag(std::function<void(CommandLineFlag&)> visitor);\n\n//-----------------------------------------------------------------------------\n\nbool RegisterCommandLineFlag(CommandLineFlag&, const char* filename);\n\nvoid FinalizeRegistry();\n\n//-----------------------------------------------------------------------------\n// Retired registrations:\n//\n// Retired flag registrations are treated specially. A 'retired' flag is\n// provided only for compatibility with automated invocations that still\n// name it.  A 'retired' flag:\n//   - is not bound to a C++ FLAGS_ reference.\n//   - has a type and a value, but that value is intentionally inaccessible.\n//   - does not appear in --help messages.\n//   - is fully supported by _all_ flag parsing routines.\n//   - consumes args normally, and complains about type mismatches in its\n//     argument.\n//   - emits a complaint but does not die (e.g. LOG(ERROR)) if it is\n//     accessed by name through the flags API for parsing or otherwise.\n//\n// The registrations for a flag happen in an unspecified order as the\n// initializers for the namespace-scope objects of a program are run.\n// Any number of weak registrations for a flag can weakly define the flag.\n// One non-weak registration will upgrade the flag from weak to non-weak.\n// Further weak registrations of a non-weak flag are ignored.\n//\n// This mechanism is designed to support moving dead flags into a\n// 'graveyard' library.  An example migration:\n//\n//   0: Remove references to this FLAGS_flagname in the C++ codebase.\n//   1: Register as 'retired' in old_lib.\n//   2: Make old_lib depend on graveyard.\n//   3: Add a redundant 'retired' registration to graveyard.\n//   4: Remove the old_lib 'retired' registration.\n//   5: Eventually delete the graveyard registration entirely.\n//\n\n// Retire flag with name \"name\" and type indicated by ops.\nvoid Retire(const char* name, FlagFastTypeId type_id, char* buf);\n\nconstexpr size_t kRetiredFlagObjSize = 3 * sizeof(void*);\nconstexpr size_t kRetiredFlagObjAlignment = alignof(void*);\n\n// Registered a retired flag with name 'flag_name' and type 'T'.\ntemplate <typename T>\nclass RetiredFlag {\n public:\n  void Retire(const char* flag_name) {\n    flags_internal::Retire(flag_name, base_internal::FastTypeId<T>(), buf_);\n  }\n\n private:\n  alignas(kRetiredFlagObjAlignment) char buf_[kRetiredFlagObjSize];\n};\n\n}  // namespace flags_internal\nABSL_NAMESPACE_END\n}",
  "id": "BLOCK-CPP-05546",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/flags/internal/registry.h",
  "source_line": 29,
  "validation_status": "validated"
}