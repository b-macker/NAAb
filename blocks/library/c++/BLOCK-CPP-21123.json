{
  "code": "#include \"llvm/ADT/ArrayRef.h\"\n#include \"llvm/ADT/BitmaskEnum.h\"\n#include \"llvm/ADT/SmallVector.h\"\n#include \"llvm/ADT/StringRef.h\"\n#include <cstdint>\n#include <optional>\n#include <set>\n#include <string>\n#include <unordered_map>\n#include <vector>\n\nusing namespace llvm;\nusing namespace llvm;\nusing namespace clang;\nusing namespace RISCV;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-21123_execute() {\n    {\n\nprivate:\n  std::string BuiltinName; // Builtin name\n  std::string Name;        // C intrinsic name.\n  std::string OverloadedName;\n  std::string IRName;\n  bool IsMasked;\n  bool HasMaskedOffOperand;\n  bool HasVL;\n  PolicyScheme Scheme;\n  bool SupportOverloading;\n  bool HasBuiltinAlias;\n  std::string ManualCodegen;\n  RVVTypePtr OutputType; // Builtin output type\n  RVVTypes InputTypes;   // Builtin input types\n  // The types we use to obtain the specific LLVM intrinsic. They are index of\n  // InputTypes. -1 means the return type.\n  std::vector<int64_t> IntrinsicTypes;\n  unsigned NF = 1;\n  Policy PolicyAttrs;\n\npublic:\n  RVVIntrinsic(llvm::StringRef Name, llvm::StringRef Suffix,\n               llvm::StringRef OverloadedName, llvm::StringRef OverloadedSuffix,\n               llvm::StringRef IRName, bool IsMasked, bool HasMaskedOffOperand,\n               bool HasVL, PolicyScheme Scheme, bool SupportOverloading,\n               bool HasBuiltinAlias, llvm::StringRef ManualCodegen,\n               const RVVTypes &Types,\n               const std::vector<int64_t> &IntrinsicTypes,\n               const std::vector<llvm::StringRef> &RequiredFeatures,\n               unsigned NF, Policy PolicyAttrs, bool HasFRMRoundModeOp);\n  ~RVVIntrinsic() = default;\n\n  RVVTypePtr getOutputType() const { return OutputType; }\n  const RVVTypes &getInputTypes() const { return InputTypes; }\n  llvm::StringRef getBuiltinName() const { return BuiltinName; }\n  llvm::StringRef getName() const { return Name; }\n  llvm::StringRef getOverloadedName() const { return OverloadedName; }\n  bool hasMaskedOffOperand() const { return HasMaskedOffOperand; }\n  bool hasVL() const { return HasVL; }\n  bool hasPolicy() const { return Scheme != PolicyScheme::SchemeNone; }\n  bool hasPassthruOperand() const {\n    return Scheme == PolicyScheme::HasPassthruOperand;\n  }\n  bool hasPolicyOperand() const {\n    return Scheme == PolicyScheme::HasPolicyOperand;\n  }\n  bool supportOverloading() const { return SupportOverloading; }\n  bool hasBuiltinAlias() const { return HasBuiltinAlias; }\n  bool hasManualCodegen() const { return !ManualCodegen.empty(); }\n  bool isMasked() const { return IsMasked; }\n  llvm::StringRef getIRName() const { return IRName; }\n  llvm::StringRef getManualCodegen() const { return ManualCodegen; }\n  PolicyScheme getPolicyScheme() const { return Scheme; }\n  unsigned getNF() const { return NF; }\n  const std::vector<int64_t> &getIntrinsicTypes() const {\n    return IntrinsicTypes;\n  }\n  Policy getPolicyAttrs() const {\n    return PolicyAttrs;\n  }\n  unsigned getPolicyAttrsBits() const {\n    // CGBuiltin.cpp\n    // The 0th bit simulates the `vta` of RVV\n    // The 1st bit simulates the `vma` of RVV\n    // int PolicyAttrs = 0;\n\n    if (PolicyAttrs.isTUMAPolicy())\n      return 2;\n    if (PolicyAttrs.isTAMAPolicy())\n      return 3;\n    if (PolicyAttrs.isTUMUPolicy())\n      return 0;\n    if (PolicyAttrs.isTAMUPolicy())\n      return 1;\n\n    llvm_unreachable(\"unsupport policy\");\n    return 0;\n  }\n\n  // Return the type string for a BUILTIN() macro in Builtins.def.\n  std::string getBuiltinTypeStr() const;\n\n  static std::string\n  getSuffixStr(RVVTypeCache &TypeCache, BasicType Type, int Log2LMUL,\n               llvm::ArrayRef<PrototypeDescriptor> PrototypeDescriptors);\n\n  static llvm::SmallVector<PrototypeDescriptor>\n  computeBuiltinTypes(llvm::ArrayRef<PrototypeDescriptor> Prototype,\n                      bool IsMasked, bool HasMaskedOffOperand, bool HasVL,\n                      unsigned NF, PolicyScheme DefaultScheme,\n                      Policy PolicyAttrs, bool IsTuple);\n\n  static llvm::SmallVector<Policy> getSupportedUnMaskedPolicies();\n  static llvm::SmallVector<Policy>\n      getSupportedMaskedPolicies(bool HasTailPolicy, bool HasMaskPolicy);\n\n  static void updateNamesAndPolicy(bool IsMasked, bool HasPolicy,\n                                   std::string &Name, std::string &BuiltinName,\n                                   std::string &OverloadedName,\n                                   Policy &PolicyAttrs, bool HasFRMRoundModeOp);\n}\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-21123",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Support/RISCVVIntrinsicUtils.h",
  "source_line": 369,
  "validation_status": "validated"
}