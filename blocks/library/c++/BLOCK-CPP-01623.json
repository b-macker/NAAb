{
  "code": "#include \"absl/debugging/failure_signal_handler.h\"\n#include \"absl/base/config.h\"\n#include <windows.h>\n#include <sched.h>\n#include <unistd.h>\n#include <TargetConditionals.h>\n#include <sys/mman.h>\n#include <sys/prctl.h>\n#include <algorithm>\n#include <atomic>\n#include <cerrno>\n#include <csignal>\n#include <cstdio>\n#include <cstring>\n#include <ctime>\n#include \"absl/base/attributes.h\"\n#include \"absl/base/internal/raw_logging.h\"\n#include \"absl/base/internal/sysinfo.h\"\n#include \"absl/debugging/internal/examine_stack.h\"\n#include \"absl/debugging/stacktrace.h\"\n\nusing namespace absl;\nusing namespace debugging_internal;\nusing namespace debugging_internal;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-01623_execute() {\n    {\n#if defined(__wasm__) || defined(__asjms__)\n  const size_t page_mask = getpagesize() - 1;\n#else\n  const size_t page_mask = static_cast<size_t>(sysconf(_SC_PAGESIZE)) - 1;\n#endif\n  size_t stack_size =\n      (std::max(static_cast<size_t>(SIGSTKSZ), size_t{65536}) + page_mask) &\n      ~page_mask;\n#if defined(ABSL_HAVE_ADDRESS_SANITIZER) || \\\n    defined(ABSL_HAVE_MEMORY_SANITIZER) || defined(ABSL_HAVE_THREAD_SANITIZER)\n  // Account for sanitizer instrumentation requiring additional stack space.\n  stack_size *= 5;\n#endif\n\n  stack_t sigstk;\n  memset(&sigstk, 0, sizeof(sigstk));\n  sigstk.ss_size = stack_size;\n\n#ifdef ABSL_HAVE_MMAP\n#ifndef MAP_STACK\n#define MAP_STACK 0\n#endif\n  sigstk.ss_sp = mmap(nullptr, sigstk.ss_size, PROT_READ | PROT_WRITE,\n                      MAP_PRIVATE | MAP_ANONYMOUS | MAP_STACK, -1, 0);\n  if (sigstk.ss_sp == MAP_FAILED) {\n    ABSL_RAW_LOG(FATAL, \"mmap() for alternate signal stack failed\");\n  }\n#else\n  sigstk.ss_sp = malloc(sigstk.ss_size);\n  if (sigstk.ss_sp == nullptr) {\n    ABSL_RAW_LOG(FATAL, \"malloc() for alternate signal stack failed\");\n  }\n#endif\n\n  if (sigaltstack(&sigstk, nullptr) != 0) {\n    ABSL_RAW_LOG(FATAL, \"sigaltstack() failed with errno=%d\", errno);\n  }\n\n#ifdef __linux__\n#if defined(PR_SET_VMA) && defined(PR_SET_VMA_ANON_NAME)\n  // Make a best-effort attempt to name the allocated region in\n  // /proc/$PID/smaps.\n  //\n  // The call to prctl() may fail if the kernel was not configured with the\n  // CONFIG_ANON_VMA_NAME kernel option.  This is OK since the call is\n  // primarily a debugging aid.\n  prctl(PR_SET_VMA, PR_SET_VMA_ANON_NAME, sigstk.ss_sp, sigstk.ss_size,\n        \"absl-signalstack\");\n#endif\n#endif  // __linux__\n\n  return true;\n}\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-01623",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/debugging/failure_signal_handler.cc",
  "source_line": 141,
  "validation_status": "validated"
}