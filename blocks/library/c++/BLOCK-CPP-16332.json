{
  "code": "{\npublic:\n  const DirectoryEntry &getDirEntry() const { return *ME->getValue(); }\n\n  StringRef getName() const { return ME->getKey(); }\n\n  /// Hash code is based on the DirectoryEntry, not the specific named\n  /// reference.\n  friend llvm::hash_code hash_value(DirectoryEntryRef Ref) {\n    return llvm::hash_value(&Ref.getDirEntry());\n  }\n\n  using MapEntry = llvm::StringMapEntry<llvm::ErrorOr<DirectoryEntry &>>;\n\n  const MapEntry &getMapEntry() const { return *ME; }\n\n  /// Check if RHS referenced the file in exactly the same way.\n  bool isSameRef(DirectoryEntryRef RHS) const { return ME == RHS.ME; }\n\n  DirectoryEntryRef() = delete;\n  explicit DirectoryEntryRef(const MapEntry &ME) : ME(&ME) {}\n\n  /// Allow DirectoryEntryRef to degrade into 'const DirectoryEntry*' to\n  /// facilitate incremental adoption.\n  ///\n  /// The goal is to avoid code churn due to dances like the following:\n  /// \\code\n  /// // Old code.\n  /// lvalue = rvalue;\n  ///\n  /// // Temporary code from an incremental patch.\n  /// lvalue = &rvalue.getDirectoryEntry();\n  ///\n  /// // Final code.\n  /// lvalue = rvalue;\n  /// \\endcode\n  ///\n  /// FIXME: Once DirectoryEntryRef is \"everywhere\" and DirectoryEntry::getName\n  /// has been deleted, delete this implicit conversion.\n  operator const DirectoryEntry *() const { return &getDirEntry(); }\n\nprivate:\n  friend class FileMgr::MapEntryOptionalStorage<DirectoryEntryRef>;\n  struct optional_none_tag {};\n\n  // Private constructor for use by OptionalStorage.\n  DirectoryEntryRef(optional_none_tag) : ME(nullptr) {}\n  bool hasOptionalValue() const { return ME; }\n\n  friend struct llvm::DenseMapInfo<DirectoryEntryRef>;\n  struct dense_map_empty_tag {};\n  struct dense_map_tombstone_tag {};\n\n  // Private constructors for use by DenseMapInfo.\n  DirectoryEntryRef(dense_map_empty_tag)\n      : ME(llvm::DenseMapInfo<const MapEntry *>::getEmptyKey()) {}\n  DirectoryEntryRef(dense_map_tombstone_tag)\n      : ME(llvm::DenseMapInfo<const MapEntry *>::getTombstoneKey()) {}\n  bool isSpecialDenseMapKey() const {\n    return isSameRef(DirectoryEntryRef(dense_map_empty_tag())) ||\n           isSameRef(DirectoryEntryRef(dense_map_tombstone_tag()));\n  }\n\n  const MapEntry *ME;\n}",
  "id": "BLOCK-CPP-16332",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Basic/DirectoryEntry.h",
  "source_line": 55,
  "validation_status": "validated"
}