{
  "code": "{\npublic:\n  enum DDKind : unsigned char { Availability, Access, ForbiddenType };\n\n  DDKind Kind;\n  bool Triggered;\n\n  SourceLocation Loc;\n\n  void Destroy();\n\n  static DelayedDiagnostic makeAvailability(AvailabilityResult AR,\n                                            ArrayRef<SourceLocation> Locs,\n                                            const NamedDecl *ReferringDecl,\n                                            const NamedDecl *OffendingDecl,\n                                            const ObjCInterfaceDecl *UnknownObjCClass,\n                                            const ObjCPropertyDecl  *ObjCProperty,\n                                            StringRef Msg,\n                                            bool ObjCPropertyAccess);\n\n  static DelayedDiagnostic makeAccess(SourceLocation Loc,\n                                      const AccessedEntity &Entity) {\n    DelayedDiagnostic DD;\n    DD.Kind = Access;\n    DD.Triggered = false;\n    DD.Loc = Loc;\n    new (&DD.getAccessData()) AccessedEntity(Entity);\n    return DD;\n  }\n\n  static DelayedDiagnostic makeForbiddenType(SourceLocation loc,\n                                             unsigned diagnostic,\n                                             QualType type,\n                                             unsigned argument) {\n    DelayedDiagnostic DD;\n    DD.Kind = ForbiddenType;\n    DD.Triggered = false;\n    DD.Loc = loc;\n    DD.ForbiddenTypeData.Diagnostic = diagnostic;\n    DD.ForbiddenTypeData.OperandType = type.getAsOpaquePtr();\n    DD.ForbiddenTypeData.Argument = argument;\n    return DD;\n  }\n\n  AccessedEntity &getAccessData() {\n    assert(Kind == Access && \"Not an access diagnostic.\");\n    return *reinterpret_cast<AccessedEntity*>(AccessData);\n  }\n  const AccessedEntity &getAccessData() const {\n    assert(Kind == Access && \"Not an access diagnostic.\");\n    return *reinterpret_cast<const AccessedEntity*>(AccessData);\n  }\n\n  const NamedDecl *getAvailabilityReferringDecl() const {\n    assert(Kind == Availability && \"Not an availability diagnostic.\");\n    return AvailabilityData.ReferringDecl;\n  }\n\n  const NamedDecl *getAvailabilityOffendingDecl() const {\n    return AvailabilityData.OffendingDecl;\n  }\n\n  StringRef getAvailabilityMessage() const {\n    assert(Kind == Availability && \"Not an availability diagnostic.\");\n    return StringRef(AvailabilityData.Message, AvailabilityData.MessageLen);\n  }\n\n  ArrayRef<SourceLocation> getAvailabilitySelectorLocs() const {\n    assert(Kind == Availability && \"Not an availability diagnostic.\");\n    return llvm::ArrayRef(AvailabilityData.SelectorLocs,\n                          AvailabilityData.NumSelectorLocs);\n  }\n\n  AvailabilityResult getAvailabilityResult() const {\n    assert(Kind == Availability && \"Not an availability diagnostic.\");\n    return AvailabilityData.AR;\n  }\n\n  /// The diagnostic ID to emit.  Used like so:\n  ///   Diag(diag.Loc, diag.getForbiddenTypeDiagnostic())\n  ///     << diag.getForbiddenTypeOperand()\n  ///     << diag.getForbiddenTypeArgument();\n  unsigned getForbiddenTypeDiagnostic() const {\n    assert(Kind == ForbiddenType && \"not a forbidden-type diagnostic\");\n    return ForbiddenTypeData.Diagnostic;\n  }\n\n  unsigned getForbiddenTypeArgument() const {\n    assert(Kind == ForbiddenType && \"not a forbidden-type diagnostic\");\n    return ForbiddenTypeData.Argument;\n  }\n\n  QualType getForbiddenTypeOperand() const {\n    assert(Kind == ForbiddenType && \"not a forbidden-type diagnostic\");\n    return QualType::getFromOpaquePtr(ForbiddenTypeData.OperandType);\n  }\n\n  const ObjCInterfaceDecl *getUnknownObjCClass() const {\n    return AvailabilityData.UnknownObjCClass;\n  }\n\n  const ObjCPropertyDecl *getObjCProperty() const {\n    return AvailabilityData.ObjCProperty;\n  }\n\n  bool getObjCPropertyAccess() const {\n    return AvailabilityData.ObjCPropertyAccess;\n  }\n\nprivate:\n  struct AD {\n    const NamedDecl *ReferringDecl;\n    const NamedDecl *OffendingDecl;\n    const ObjCInterfaceDecl *UnknownObjCClass;\n    const ObjCPropertyDecl  *ObjCProperty;\n    const char *Message;\n    size_t MessageLen;\n    SourceLocation *SelectorLocs;\n    size_t NumSelectorLocs;\n    AvailabilityResult AR;\n    bool ObjCPropertyAccess;\n  };\n\n  struct FTD {\n    unsigned Diagnostic;\n    unsigned Argument;\n    void *OperandType;\n  };\n\n  union {\n    struct AD AvailabilityData;\n    struct FTD ForbiddenTypeData;\n\n    /// Access control.\n    char AccessData[sizeof(AccessedEntity)];\n  };\n}",
  "id": "BLOCK-CPP-19756",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Sema/DelayedDiagnostic.h",
  "source_line": 124,
  "validation_status": "validated"
}