{
  "code": "{\n  if (input.type == strings_internal::FloatType::kNan) {\n    // A bug in both clang < 7 and gcc would cause the compiler to optimize\n    // away the buffer we are building below.  Declaring the buffer volatile\n    // avoids the issue, and has no measurable performance impact in\n    // microbenchmarks.\n    //\n    // https://bugs.llvm.org/show_bug.cgi?id=37778\n    // https://gcc.gnu.org/bugzilla/show_bug.cgi?id=86113\n    constexpr ptrdiff_t kNanBufferSize = 128;\n#if (defined(__GNUC__) && !defined(__clang__)) || \\\n    (defined(__clang__) && __clang_major__ < 7)\n    volatile char n_char_sequence[kNanBufferSize];\n#else\n    char n_char_sequence[kNanBufferSize];\n#endif\n    if (input.subrange_begin == nullptr) {\n      n_char_sequence[0] = '\\0';\n    } else {\n      ptrdiff_t nan_size = input.subrange_end - input.subrange_begin;\n      nan_size = std::min(nan_size, kNanBufferSize - 1);\n      std::copy_n(input.subrange_begin, nan_size, n_char_sequence);\n      n_char_sequence[nan_size] = '\\0';\n    }\n    char* nan_argument = const_cast<char*>(n_char_sequence);\n    *value = negative ? -FloatTraits<FloatType>::MakeNan(nan_argument)\n                      : FloatTraits<FloatType>::MakeNan(nan_argument);\n    return true;\n  }\n  if (input.type == strings_internal::FloatType::kInfinity) {\n    *value = negative ? -std::numeric_limits<FloatType>::infinity()\n                      : std::numeric_limits<FloatType>::infinity();\n    return true;\n  }\n  if (input.mantissa == 0) {\n    *value = negative ? -0.0 : 0.0;\n    return true;\n  }\n  return false;\n}",
  "id": "BLOCK-CPP-01841",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/strings/charconv.cc",
  "source_line": 358,
  "validation_status": "validated"
}