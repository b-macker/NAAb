{
  "code": "{\n\n    template <bool IsOtherReverse, bool IsOtherConst>\n    friend class ElementRefIterator;\n\n    using CFGBlockRef =\n        std::conditional_t<IsConst, const CFGBlock *, CFGBlock *>;\n\n    using UnderlayingIteratorTy = std::conditional_t<\n        IsConst,\n        std::conditional_t<IsReverse, ElementList::const_reverse_iterator,\n                           ElementList::const_iterator>,\n        std::conditional_t<IsReverse, ElementList::reverse_iterator,\n                           ElementList::iterator>>;\n\n    using IteratorTraits = typename std::iterator_traits<UnderlayingIteratorTy>;\n    using ElementRef = typename CFGBlock::ElementRefImpl<IsConst>;\n\n  public:\n    using difference_type = typename IteratorTraits::difference_type;\n    using value_type = ElementRef;\n    using pointer = ElementRef *;\n    using iterator_category = typename IteratorTraits::iterator_category;\n\n  private:\n    CFGBlockRef Parent;\n    UnderlayingIteratorTy Pos;\n\n  public:\n    ElementRefIterator(CFGBlockRef Parent, UnderlayingIteratorTy Pos)\n        : Parent(Parent), Pos(Pos) {}\n\n    template <bool IsOtherConst>\n    ElementRefIterator(ElementRefIterator<false, IsOtherConst> E)\n        : ElementRefIterator(E.Parent, E.Pos.base()) {}\n\n    template <bool IsOtherConst>\n    ElementRefIterator(ElementRefIterator<true, IsOtherConst> E)\n        : ElementRefIterator(E.Parent, std::make_reverse_iterator(E.Pos)) {}\n\n    bool operator<(ElementRefIterator Other) const {\n      assert(Parent == Other.Parent);\n      return Pos < Other.Pos;\n    }\n\n    bool operator==(ElementRefIterator Other) const {\n      return Parent == Other.Parent && Pos == Other.Pos;\n    }\n\n    bool operator!=(ElementRefIterator Other) const {\n      return !(*this == Other);\n    }\n\n  private:\n    template <bool IsOtherConst>\n    static size_t\n    getIndexInBlock(CFGBlock::ElementRefIterator<true, IsOtherConst> E) {\n      return E.Parent->size() - (E.Pos - E.Parent->rbegin()) - 1;\n    }\n\n    template <bool IsOtherConst>\n    static size_t\n    getIndexInBlock(CFGBlock::ElementRefIterator<false, IsOtherConst> E) {\n      return E.Pos - E.Parent->begin();\n    }\n\n  public:\n    value_type operator*() { return {Parent, getIndexInBlock(*this)}; }\n\n    difference_type operator-(ElementRefIterator Other) const {\n      return Pos - Other.Pos;\n    }\n\n    ElementRefIterator operator++() {\n      ++this->Pos;\n      return *this;\n    }\n    ElementRefIterator operator++(int) {\n      ElementRefIterator Ret = *this;\n      ++*this;\n      return Ret;\n    }\n    ElementRefIterator operator+(size_t count) {\n      this->Pos += count;\n      return *this;\n    }\n    ElementRefIterator operator-(size_t count) {\n      this->Pos -= count;\n      return *this;\n    }\n  }",
  "id": "BLOCK-CPP-15567",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Analysis/CFG.h",
  "source_line": 672,
  "validation_status": "validated"
}