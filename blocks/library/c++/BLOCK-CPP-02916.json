{
  "code": "#include \"absl/strings/internal/cordz_info.h\"\n#include \"absl/base/config.h\"\n#include \"absl/base/internal/spinlock.h\"\n#include \"absl/container/inlined_vector.h\"\n#include \"absl/debugging/stacktrace.h\"\n#include \"absl/strings/internal/cord_internal.h\"\n#include \"absl/strings/internal/cord_rep_btree.h\"\n#include \"absl/strings/internal/cord_rep_crc.h\"\n#include \"absl/strings/internal/cordz_handle.h\"\n#include \"absl/strings/internal/cordz_statistics.h\"\n#include \"absl/strings/internal/cordz_update_tracker.h\"\n#include \"absl/synchronization/mutex.h\"\n#include \"absl/time/clock.h\"\n#include \"absl/types/span.h\"\n\nusing namespace absl;\nusing namespace cord_internal;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-02916_execute() {\n    {\n    ABSL_ASSERT(rep != nullptr);\n\n    // Process all linear nodes.\n    // As per the class comments, use refcout - 1 on the top level node, as the\n    // top level node is assumed to be referenced only for analysis purposes.\n    size_t refcount = rep->refcount.Get();\n    RepRef repref{rep, (refcount > 1) ? refcount - 1 : 1};\n\n    // Process the top level CRC node, if present.\n    if (repref.tag() == CRC) {\n      statistics_.node_count++;\n      statistics_.node_counts.crc++;\n      memory_usage_.Add(sizeof(CordRepCrc), repref.refcount);\n      repref = repref.Child(repref.rep->crc()->child);\n    }\n\n    // Process all top level linear nodes (substrings and flats).\n    repref = CountLinearReps(repref, memory_usage_);\n\n    switch (repref.tag()) {\n      case CordRepKind::BTREE:\n        AnalyzeBtree(repref);\n        break;\n      default:\n        // We should have a btree node if not null.\n        ABSL_ASSERT(repref.tag() == CordRepKind::UNUSED_0);\n        break;\n    }\n\n    // Adds values to output\n    statistics_.estimated_memory_usage += memory_usage_.total;\n    statistics_.estimated_fair_share_memory_usage +=\n        static_cast<size_t>(memory_usage_.fair_share);\n  }\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-02916",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/strings/internal/cordz_info.cc",
  "source_line": 78,
  "validation_status": "validated"
}