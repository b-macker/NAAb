{
  "code": "{\n\nconstexpr const char kChiSquared[] = \"chi-squared\";\n\n// Returns the measured chi square value, using a single expected value.  This\n// assumes that the values in [begin, end) are uniformly distributed.\ntemplate <typename Iterator>\ndouble ChiSquareWithExpected(Iterator begin, Iterator end, double expected) {\n  // Compute the sum and the number of buckets.\n  assert(expected >= 10);  // require at least 10 samples per bucket.\n  double chi_square = 0;\n  for (auto it = begin; it != end; it++) {\n    double d = static_cast<double>(*it) - expected;\n    chi_square += d * d;\n  }\n  chi_square = chi_square / expected;\n  return chi_square;\n}\n\n// Returns the measured chi square value, taking the actual value of each bucket\n// from the first set of iterators, and the expected value of each bucket from\n// the second set of iterators.\ntemplate <typename Iterator, typename Expected>\ndouble ChiSquare(Iterator it, Iterator end, Expected eit, Expected eend) {\n  double chi_square = 0;\n  for (; it != end && eit != eend; ++it, ++eit) {\n    if (*it > 0) {\n      assert(*eit > 0);\n    }\n    double e = static_cast<double>(*eit);\n    double d = static_cast<double>(*it - *eit);\n    if (d != 0) {\n      assert(e > 0);\n      chi_square += (d * d) / e;\n    }\n  }\n  assert(it == end && eit == eend);\n  return chi_square;\n}\n\n// ======================================================================\n// The following methods can be used for an arbitrary significance level.\n//\n\n// Calculates critical chi-square values to produce the given p-value using a\n// bisection search for a value within epsilon, relying on the monotonicity of\n// ChiSquarePValue().\ndouble ChiSquareValue(int dof, double p);\n\n// Calculates the p-value (probability) of a given chi-square value.\ndouble ChiSquarePValue(double chi_square, int dof);\n\n}",
  "id": "BLOCK-CPP-05839",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/random/internal/chi_square.h",
  "source_line": 33,
  "validation_status": "validated"
}