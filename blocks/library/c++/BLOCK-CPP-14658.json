{
  "code": "{\nprivate:\n\n  /// Contains the index (relative to the vtable address point)\n  /// where the function pointer for a virtual function is stored.\n  typedef llvm::DenseMap<GlobalDecl, int64_t> MethodVTableIndicesTy;\n  MethodVTableIndicesTy MethodVTableIndices;\n\n  typedef llvm::DenseMap<const CXXRecordDecl *,\n                         std::unique_ptr<const VTableLayout>>\n      VTableLayoutMapTy;\n  VTableLayoutMapTy VTableLayouts;\n\n  typedef std::pair<const CXXRecordDecl *,\n                    const CXXRecordDecl *> ClassPairTy;\n\n  /// vtable offsets for offsets of virtual bases of a class.\n  ///\n  /// Contains the vtable offset (relative to the address point) in chars\n  /// where the offsets for virtual bases of a class are stored.\n  typedef llvm::DenseMap<ClassPairTy, CharUnits>\n    VirtualBaseClassOffsetOffsetsMapTy;\n  VirtualBaseClassOffsetOffsetsMapTy VirtualBaseClassOffsetOffsets;\n\n  void computeVTableRelatedInformation(const CXXRecordDecl *RD) override;\n\npublic:\n  enum VTableComponentLayout {\n    /// Components in the vtable are pointers to other structs/functions.\n    Pointer,\n\n    /// Components in the vtable are relative offsets between the vtable and the\n    /// other structs/functions.\n    Relative,\n  };\n\n  ItaniumVTableContext(ASTContext &Context,\n                       VTableComponentLayout ComponentLayout = Pointer);\n  ~ItaniumVTableContext() override;\n\n  const VTableLayout &getVTableLayout(const CXXRecordDecl *RD) {\n    computeVTableRelatedInformation(RD);\n    assert(VTableLayouts.count(RD) && \"No layout for this record decl!\");\n\n    return *VTableLayouts[RD];\n  }\n\n  std::unique_ptr<VTableLayout> createConstructionVTableLayout(\n      const CXXRecordDecl *MostDerivedClass, CharUnits MostDerivedClassOffset,\n      bool MostDerivedClassIsVirtual, const CXXRecordDecl *LayoutClass);\n\n  /// Locate a virtual function in the vtable.\n  ///\n  /// Return the index (relative to the vtable address point) where the\n  /// function pointer for the given virtual function is stored.\n  uint64_t getMethodVTableIndex(GlobalDecl GD);\n\n  /// Return the offset in chars (relative to the vtable address point) where\n  /// the offset of the virtual base that contains the given base is stored,\n  /// otherwise, if no virtual base contains the given class, return 0.\n  ///\n  /// Base must be a virtual base class or an unambiguous base.\n  CharUnits getVirtualBaseOffsetOffset(const CXXRecordDecl *RD,\n                                       const CXXRecordDecl *VBase);\n\n  static bool classof(const VTableContextBase *VT) {\n    return !VT->isMicrosoft();\n  }\n\n  VTableComponentLayout getVTableComponentLayout() const {\n    return ComponentLayout;\n  }\n\n  bool isPointerLayout() const { return ComponentLayout == Pointer; }\n  bool isRelativeLayout() const { return ComponentLayout == Relative; }\n\nprivate:\n  VTableComponentLayout ComponentLayout;\n}",
  "id": "BLOCK-CPP-14658",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/AST/VTableBuilder.h",
  "source_line": 363,
  "validation_status": "validated"
}