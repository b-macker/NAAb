{
  "code": "{\n  friend class Rewriter;\n\n  /// Deltas - Keep track of all the deltas in the source code due to insertions\n  /// and deletions.\n  DeltaTree Deltas;\n\n  RewriteRope Buffer;\n\npublic:\n  using iterator = RewriteRope::const_iterator;\n\n  iterator begin() const { return Buffer.begin(); }\n  iterator end() const { return Buffer.end(); }\n  unsigned size() const { return Buffer.size(); }\n\n  /// Initialize - Start this rewrite buffer out with a copy of the unmodified\n  /// input buffer.\n  void Initialize(const char *BufStart, const char *BufEnd) {\n    Buffer.assign(BufStart, BufEnd);\n  }\n  void Initialize(StringRef Input) {\n    Initialize(Input.begin(), Input.end());\n  }\n\n  /// Write to \\p Stream the result of applying all changes to the\n  /// original buffer.\n  /// Note that it isn't safe to use this function to overwrite memory mapped\n  /// files in-place (PR17960). Consider using a higher-level utility such as\n  /// Rewriter::overwriteChangedFiles() instead.\n  ///\n  /// The original buffer is not actually changed.\n  raw_ostream &write(raw_ostream &Stream) const;\n\n  /// RemoveText - Remove the specified text.\n  void RemoveText(unsigned OrigOffset, unsigned Size,\n                  bool removeLineIfEmpty = false);\n\n  /// InsertText - Insert some text at the specified point, where the offset in\n  /// the buffer is specified relative to the original SourceBuffer.  The\n  /// text is inserted after the specified location.\n  void InsertText(unsigned OrigOffset, StringRef Str,\n                  bool InsertAfter = true);\n\n\n  /// InsertTextBefore - Insert some text before the specified point, where the\n  /// offset in the buffer is specified relative to the original\n  /// SourceBuffer. The text is inserted before the specified location.  This is\n  /// method is the same as InsertText with \"InsertAfter == false\".\n  void InsertTextBefore(unsigned OrigOffset, StringRef Str) {\n    InsertText(OrigOffset, Str, false);\n  }\n\n  /// InsertTextAfter - Insert some text at the specified point, where the\n  /// offset in the buffer is specified relative to the original SourceBuffer.\n  /// The text is inserted after the specified location.\n  void InsertTextAfter(unsigned OrigOffset, StringRef Str) {\n    InsertText(OrigOffset, Str);\n  }\n\n  /// ReplaceText - This method replaces a range of characters in the input\n  /// buffer with a new string.  This is effectively a combined \"remove/insert\"\n  /// operation.\n  void ReplaceText(unsigned OrigOffset, unsigned OrigLength,\n                   StringRef NewStr);\n\nprivate:\n  /// getMappedOffset - Given an offset into the original SourceBuffer that this\n  /// RewriteBuffer is based on, map it into the offset space of the\n  /// RewriteBuffer.  If AfterInserts is true and if the OrigOffset indicates a\n  /// position where text is inserted, the location returned will be after any\n  /// inserted text at the position.\n  unsigned getMappedOffset(unsigned OrigOffset,\n                           bool AfterInserts = false) const{\n    return Deltas.getDeltaAt(2*OrigOffset+AfterInserts)+OrigOffset;\n  }\n\n  /// AddInsertDelta - When an insertion is made at a position, this\n  /// method is used to record that information.\n  void AddInsertDelta(unsigned OrigOffset, int Change) {\n    return Deltas.AddDelta(2*OrigOffset, Change);\n  }\n\n  /// AddReplaceDelta - When a replacement/deletion is made at a position, this\n  /// method is used to record that information.\n  void AddReplaceDelta(unsigned OrigOffset, int Change) {\n    return Deltas.AddDelta(2*OrigOffset+1, Change);\n  }\n}",
  "id": "BLOCK-CPP-22126",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Rewrite/Core/RewriteBuffer.h",
  "source_line": 25,
  "validation_status": "validated"
}