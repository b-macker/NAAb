{
  "code": "#include <spdlog/common.h>\n#include <spdlog/details/os.h>\n#include <spdlog/details/windows_include.h>\n#include <stdio.h>\n#include <stdlib.h>\n#include <string>\n#include <winsock2.h>\n#include <ws2tcpip.h>\n\nusing namespace spdlog;\nusing namespace details;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-00333_execute() {\n    {\n        init_winsock_();\n\n        addr_.sin_family = PF_INET;\n        addr_.sin_port = htons(port);\n        addr_.sin_addr.s_addr = INADDR_ANY;\n        if (InetPtonA(PF_INET, host.c_str(), &addr_.sin_addr.s_addr) != 1) {\n            int last_error = ::WSAGetLastError();\n            ::WSACleanup();\n            throw_winsock_error_(\"error: Invalid address!\", last_error);\n        }\n\n        socket_ = ::socket(PF_INET, SOCK_DGRAM, 0);\n        if (socket_ == INVALID_SOCKET) {\n            int last_error = ::WSAGetLastError();\n            ::WSACleanup();\n            throw_winsock_error_(\"error: Create Socket failed\", last_error);\n        }\n\n        int option_value = TX_BUFFER_SIZE;\n        if (::setsockopt(socket_, SOL_SOCKET, SO_SNDBUF,\n                         reinterpret_cast<const char *>(&option_value), sizeof(option_value)) < 0) {\n            int last_error = ::WSAGetLastError();\n            cleanup_();\n            throw_winsock_error_(\"error: setsockopt(SO_SNDBUF) Failed!\", last_error);\n        }\n    }\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-00333",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/spdlog/include/spdlog/details/udp_client-windows.h",
  "source_line": 56,
  "validation_status": "validated"
}