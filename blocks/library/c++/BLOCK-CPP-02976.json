{
  "code": "{\n  const auto v = static_cast<uint32_t>(wc);\n  if (v < 0x80) {\n    *buf = static_cast<char>(v);\n    return 1;\n  } else if (v < 0x800) {\n    *buf++ = static_cast<char>(0xc0 | (v >> 6));\n    *buf = static_cast<char>(0x80 | (v & 0x3f));\n    return 2;\n  } else if (v < 0xd800 || (v - 0xe000) < 0x2000) {\n    *buf++ = static_cast<char>(0xe0 | (v >> 12));\n    *buf++ = static_cast<char>(0x80 | ((v >> 6) & 0x3f));\n    *buf = static_cast<char>(0x80 | (v & 0x3f));\n    return 3;\n  } else if ((v - 0x10000) < 0x100000) {\n    *buf++ = static_cast<char>(0xf0 | (v >> 18));\n    *buf++ = static_cast<char>(0x80 | ((v >> 12) & 0x3f));\n    *buf++ = static_cast<char>(0x80 | ((v >> 6) & 0x3f));\n    *buf = static_cast<char>(0x80 | (v & 0x3f));\n    return 4;\n  } else if (v < 0xdc00) {\n    s.saw_high_surrogate = true;\n    s.bits = static_cast<uint8_t>(v & 0x3);\n    const uint8_t high_bits = ((v >> 6) & 0xf) + 1;\n    *buf++ = static_cast<char>(0xf0 | (high_bits >> 2));\n    *buf =\n        static_cast<char>(0x80 | static_cast<uint8_t>((high_bits & 0x3) << 4) |\n                          static_cast<uint8_t>((v >> 2) & 0xf));\n    return 2;\n  } else if (v < 0xe000 && s.saw_high_surrogate) {\n    *buf++ = static_cast<char>(0x80 | static_cast<uint8_t>(s.bits << 4) |\n                               static_cast<uint8_t>((v >> 6) & 0xf));\n    *buf = static_cast<char>(0x80 | (v & 0x3f));\n    s.saw_high_surrogate = false;\n    s.bits = 0;\n    return 2;\n  } else {\n    return static_cast<size_t>(-1);\n  }\n}",
  "id": "BLOCK-CPP-02976",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/strings/internal/str_format/arg.cc",
  "source_line": 326,
  "validation_status": "validated"
}