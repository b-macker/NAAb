{
  "code": "#include \"absl/base/thread_annotations.h\"\n#include \"absl/synchronization/mutex.h\"\n\nusing namespace absl;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-04297_execute() {\n    {\nABSL_NAMESPACE_BEGIN\n\n// Barrier\n//\n// This class creates a barrier which blocks threads until a prespecified\n// threshold of threads (`num_threads`) utilizes the barrier. A thread utilizes\n// the `Barrier` by calling `Block()` on the barrier, which will block that\n// thread; no call to `Block()` will return until `num_threads` threads have\n// called it.\n//\n// Exactly one call to `Block()` will return `true`, which is then responsible\n// for destroying the barrier; because stack allocation will cause the barrier\n// to be deleted when it is out of scope, barriers should not be stack\n// allocated.\n//\n// Example:\n//\n//   // Main thread creates a `Barrier`:\n//   barrier = new Barrier(num_threads);\n//\n//   // Each participating thread could then call:\n//   if (barrier->Block()) delete barrier;  // Exactly one call to `Block()`\n//                                          // returns `true`; that call\n//                                          // deletes the barrier.\nclass Barrier {\n public:\n  // `num_threads` is the number of threads that will participate in the barrier\n  explicit Barrier(int num_threads)\n      : num_to_block_(num_threads), num_to_exit_(num_threads) {}\n\n  Barrier(const Barrier&) = delete;\n  Barrier& operator=(const Barrier&) = delete;\n\n  // Barrier::Block()\n  //\n  // Blocks the current thread, and returns only when the `num_threads`\n  // threshold of threads utilizing this barrier has been reached. `Block()`\n  // returns `true` for precisely one caller, which may then destroy the\n  // barrier.\n  //\n  // Memory ordering: For any threads X and Y, any action taken by X\n  // before X calls `Block()` will be visible to Y after Y returns from\n  // `Block()`.\n  bool Block();\n\n private:\n  Mutex lock_;\n  int num_to_block_ ABSL_GUARDED_BY(lock_);\n  int num_to_exit_ ABSL_GUARDED_BY(lock_);\n};\n\nABSL_NAMESPACE_END\n}\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-04297",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/synchronization/barrier.h",
  "source_line": 25,
  "validation_status": "validated"
}