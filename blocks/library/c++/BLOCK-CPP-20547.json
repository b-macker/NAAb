{
  "code": "{\n    // Pointer to allow copying\n    Sema *Self;\n    // We order exception specifications thus:\n    // noexcept is the most restrictive, but is only used in C++11.\n    // throw() comes next.\n    // Then a throw(collected exceptions)\n    // Finally no specification, which is expressed as noexcept(false).\n    // throw(...) is used instead if any called function uses it.\n    ExceptionSpecificationType ComputedEST;\n    llvm::SmallPtrSet<CanQualType, 4> ExceptionsSeen;\n    SmallVector<QualType, 4> Exceptions;\n\n    void ClearExceptions() {\n      ExceptionsSeen.clear();\n      Exceptions.clear();\n    }\n\n  public:\n    explicit ImplicitExceptionSpecification(Sema &Self)\n      : Self(&Self), ComputedEST(EST_BasicNoexcept) {\n      if (!Self.getLangOpts().CPlusPlus11)\n        ComputedEST = EST_DynamicNone;\n    }\n\n    /// Get the computed exception specification type.\n    ExceptionSpecificationType getExceptionSpecType() const {\n      assert(!isComputedNoexcept(ComputedEST) &&\n             \"noexcept(expr) should not be a possible result\");\n      return ComputedEST;\n    }\n\n    /// The number of exceptions in the exception specification.\n    unsigned size() const { return Exceptions.size(); }\n\n    /// The set of exceptions in the exception specification.\n    const QualType *data() const { return Exceptions.data(); }\n\n    /// Integrate another called method into the collected data.\n    void CalledDecl(SourceLocation CallLoc, const CXXMethodDecl *Method);\n\n    /// Integrate an invoked expression into the collected data.\n    void CalledExpr(Expr *E) { CalledStmt(E); }\n\n    /// Integrate an invoked statement into the collected data.\n    void CalledStmt(Stmt *S);\n\n    /// Overwrite an EPI's exception specification with this\n    /// computed exception specification.\n    FunctionProtoType::ExceptionSpecInfo getExceptionSpec() const {\n      FunctionProtoType::ExceptionSpecInfo ESI;\n      ESI.Type = getExceptionSpecType();\n      if (ESI.Type == EST_Dynamic) {\n        ESI.Exceptions = Exceptions;\n      } else if (ESI.Type == EST_None) {\n        /// C++11 [except.spec]p14:\n        ///   The exception-specification is noexcept(false) if the set of\n        ///   potential exceptions of the special member function contains \"any\"\n        ESI.Type = EST_NoexceptFalse;\n        ESI.NoexceptExpr = Self->ActOnCXXBoolLiteral(SourceLocation(),\n                                                     tok::kw_false).get();\n      }\n      return ESI;\n    }\n  }",
  "id": "BLOCK-CPP-20547",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Sema/Sema.h",
  "source_line": 6353,
  "validation_status": "validated"
}