{
  "code": "#include \"llvm/ADT/ArrayRef.h\"\n#include \"llvm/ADT/StringRef.h\"\n#include \"llvm/Support/Error.h\"\n#include <functional>\n#include <memory>\n#include <string>\n\nusing namespace clang;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-17628_execute() {\n    {\npublic:\n  struct Event {\n    enum class EventKind {\n      Removed,\n      /// Content of a file was modified.\n      Modified,\n      /// The watched directory got deleted.\n      WatchedDirRemoved,\n      /// The DirectoryWatcher that originated this event is no longer valid and\n      /// its behavior is unspecified.\n      ///\n      /// The prime case is kernel signalling to OS-specific implementation of\n      /// DirectoryWatcher some resource limit being hit.\n      /// *Usually* kernel starts dropping or squashing events together after\n      /// that and so would DirectoryWatcher. This means that *some* events\n      /// might still be passed to Receiver but this behavior is unspecified.\n      ///\n      /// Another case is after the watched directory itself is deleted.\n      /// WatcherGotInvalidated will be received at least once during\n      /// DirectoryWatcher instance lifetime - when handling errors this is done\n      /// on best effort basis, when an instance is being destroyed then this is\n      /// guaranteed.\n      ///\n      /// The only proper response to this kind of event is to destruct the\n      /// originating DirectoryWatcher instance and create a new one.\n      WatcherGotInvalidated\n    };\n\n    EventKind Kind;\n    /// Filename that this event is related to or an empty string in\n    /// case this event is related to the watched directory itself.\n    std::string Filename;\n\n    Event(EventKind Kind, llvm::StringRef Filename)\n        : Kind(Kind), Filename(Filename) {}\n  };\n\n  /// llvm fatal_error if \\param Path doesn't exist or isn't a directory.\n  /// Returns llvm::Expected Error if OS kernel API told us we can't start\n  /// watching. In such case it's unclear whether just retrying has any chance\n  /// to succeed.\n  static llvm::Expected<std::unique_ptr<DirectoryWatcher>>\n  create(llvm::StringRef Path,\n         std::function<void(llvm::ArrayRef<DirectoryWatcher::Event> Events,\n                            bool IsInitial)>\n             Receiver,\n         bool WaitForInitialSync);\n\n  virtual ~DirectoryWatcher() = default;\n  DirectoryWatcher(const DirectoryWatcher &) = delete;\n  DirectoryWatcher &operator=(const DirectoryWatcher &) = delete;\n  DirectoryWatcher(DirectoryWatcher &&) = default;\n\nprotected:\n  DirectoryWatcher() = default;\n}\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-17628",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/DirectoryWatcher/DirectoryWatcher.h",
  "source_line": 64,
  "validation_status": "validated"
}