{
  "code": "{\n public:\n  constexpr CharSet() : m_() {}\n\n  // Initializes with a given string_view.\n  constexpr explicit CharSet(absl::string_view str) : m_() {\n    for (char c : str) {\n      SetChar(static_cast<unsigned char>(c));\n    }\n  }\n\n  constexpr bool contains(char c) const {\n    return ((m_[static_cast<unsigned char>(c) / 64] >>\n             (static_cast<unsigned char>(c) % 64)) &\n            0x1) == 0x1;\n  }\n\n  constexpr bool empty() const {\n    for (uint64_t c : m_) {\n      if (c != 0) return false;\n    }\n    return true;\n  }\n\n  // Containing only a single specified char.\n  static constexpr CharSet Char(char x) {\n    return CharSet(CharMaskForWord(x, 0), CharMaskForWord(x, 1),\n                   CharMaskForWord(x, 2), CharMaskForWord(x, 3));\n  }\n\n  // Containing all the chars in the closed interval [lo,hi].\n  static constexpr CharSet Range(char lo, char hi) {\n    return CharSet(RangeForWord(lo, hi, 0), RangeForWord(lo, hi, 1),\n                   RangeForWord(lo, hi, 2), RangeForWord(lo, hi, 3));\n  }\n\n  friend constexpr CharSet operator&(const CharSet& a, const CharSet& b) {\n    return CharSet(a.m_[0] & b.m_[0], a.m_[1] & b.m_[1], a.m_[2] & b.m_[2],\n                   a.m_[3] & b.m_[3]);\n  }\n\n  friend constexpr CharSet operator|(const CharSet& a, const CharSet& b) {\n    return CharSet(a.m_[0] | b.m_[0], a.m_[1] | b.m_[1], a.m_[2] | b.m_[2],\n                   a.m_[3] | b.m_[3]);\n  }\n\n  friend constexpr CharSet operator~(const CharSet& a) {\n    return CharSet(~a.m_[0], ~a.m_[1], ~a.m_[2], ~a.m_[3]);\n  }\n\n  // Mirrors the char-classifying predicates in <cctype>.\n  static constexpr CharSet AsciiUppercase() { return CharSet::Range('A', 'Z'); }\n  static constexpr CharSet AsciiLowercase() { return CharSet::Range('a', 'z'); }\n  static constexpr CharSet AsciiDigits() { return CharSet::Range('0', '9'); }\n  static constexpr CharSet AsciiAlphabet() {\n    return AsciiLowercase() | AsciiUppercase();\n  }\n  static constexpr CharSet AsciiAlphanumerics() {\n    return AsciiDigits() | AsciiAlphabet();\n  }\n  static constexpr CharSet AsciiHexDigits() {\n    return AsciiDigits() | CharSet::Range('A', 'F') | CharSet::Range('a', 'f');\n  }\n  static constexpr CharSet AsciiPrintable() {\n    return CharSet::Range(0x20, 0x7e);\n  }\n  static constexpr CharSet AsciiWhitespace() { return CharSet(\"\\t\\n\\v\\f\\r \"); }\n  static constexpr CharSet AsciiPunctuation() {\n    return AsciiPrintable() & ~AsciiWhitespace() & ~AsciiAlphanumerics();\n  }\n\n private:\n  constexpr CharSet(uint64_t b0, uint64_t b1, uint64_t b2, uint64_t b3)\n      : m_{b0, b1, b2, b3} {}\n\n  static constexpr uint64_t RangeForWord(char lo, char hi, uint64_t word) {\n    return OpenRangeFromZeroForWord(static_cast<unsigned char>(hi) + 1, word) &\n           ~OpenRangeFromZeroForWord(static_cast<unsigned char>(lo), word);\n  }\n\n  // All the chars in the specified word of the range [0, upper).\n  static constexpr uint64_t OpenRangeFromZeroForWord(uint64_t upper,\n                                                     uint64_t word) {\n    return (upper <= 64 * word) ? 0\n           : (upper >= 64 * (word + 1))\n               ? ~static_cast<uint64_t>(0)\n               : (~static_cast<uint64_t>(0) >> (64 - upper % 64));\n  }\n\n  static constexpr uint64_t CharMaskForWord(char x, uint64_t word) {\n    return (static_cast<unsigned char>(x) / 64 == word)\n               ? (static_cast<uint64_t>(1)\n                  << (static_cast<unsigned char>(x) % 64))\n               : 0;\n  }\n\n  constexpr void SetChar(unsigned char c) {\n    m_[c / 64] |= static_cast<uint64_t>(1) << (c % 64);\n  }\n\n  uint64_t m_[4];\n}",
  "id": "BLOCK-CPP-04003",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/strings/charset.h",
  "source_line": 59,
  "validation_status": "validated"
}