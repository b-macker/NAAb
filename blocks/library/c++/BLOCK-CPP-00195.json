{
  "code": "    #include <spdlog/details/backtracer.h>\n\nusing namespace spdlog;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-00195_execute() {\n    {\nnamespace details {\nSPDLOG_INLINE backtracer::backtracer(const backtracer &other) {\n    std::lock_guard<std::mutex> lock(other.mutex_);\n    enabled_ = other.enabled();\n    messages_ = other.messages_;\n}\n\nSPDLOG_INLINE backtracer::backtracer(backtracer &&other) SPDLOG_NOEXCEPT {\n    std::lock_guard<std::mutex> lock(other.mutex_);\n    enabled_ = other.enabled();\n    messages_ = std::move(other.messages_);\n}\n\nSPDLOG_INLINE backtracer &backtracer::operator=(backtracer other) {\n    std::lock_guard<std::mutex> lock(mutex_);\n    enabled_ = other.enabled();\n    messages_ = std::move(other.messages_);\n    return *this;\n}\n\nSPDLOG_INLINE void backtracer::enable(size_t size) {\n    std::lock_guard<std::mutex> lock{mutex_};\n    enabled_.store(true, std::memory_order_relaxed);\n    messages_ = circular_q<log_msg_buffer>{size};\n}\n\nSPDLOG_INLINE void backtracer::disable() {\n    std::lock_guard<std::mutex> lock{mutex_};\n    enabled_.store(false, std::memory_order_relaxed);\n}\n\nSPDLOG_INLINE bool backtracer::enabled() const { return enabled_.load(std::memory_order_relaxed); }\n\nSPDLOG_INLINE void backtracer::push_back(const log_msg &msg) {\n    std::lock_guard<std::mutex> lock{mutex_};\n    messages_.push_back(log_msg_buffer{msg});\n}\n\nSPDLOG_INLINE bool backtracer::empty() const {\n    std::lock_guard<std::mutex> lock{mutex_};\n    return messages_.empty();\n}\n\n// pop all items in the q and apply the given fun on each of them.\nSPDLOG_INLINE void backtracer::foreach_pop(std::function<void(const details::log_msg &)> fun) {\n    std::lock_guard<std::mutex> lock{mutex_};\n    while (!messages_.empty()) {\n        auto &front_msg = messages_.front();\n        fun(front_msg);\n        messages_.pop_front();\n    }\n}\n}  // namespace details\n}\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-00195",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/spdlog/include/spdlog/details/backtracer-inl.h",
  "source_line": 9,
  "validation_status": "validated"
}