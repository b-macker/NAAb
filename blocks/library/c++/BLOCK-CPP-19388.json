{
  "code": "{\n    Sema &Actions;\n    sema::DelayedDiagnosticPool DiagnosticPool;\n    Sema::ParsingDeclState State;\n    bool Popped;\n\n    ParsingDeclRAIIObject(const ParsingDeclRAIIObject &) = delete;\n    void operator=(const ParsingDeclRAIIObject &) = delete;\n\n  public:\n    enum NoParent_t { NoParent };\n    ParsingDeclRAIIObject(Parser &P, NoParent_t _)\n        : Actions(P.getActions()), DiagnosticPool(nullptr) {\n      push();\n    }\n\n    /// Creates a RAII object whose pool is optionally parented by another.\n    ParsingDeclRAIIObject(Parser &P,\n                          const sema::DelayedDiagnosticPool *parentPool)\n        : Actions(P.getActions()), DiagnosticPool(parentPool) {\n      push();\n    }\n\n    /// Creates a RAII object and, optionally, initialize its\n    /// diagnostics pool by stealing the diagnostics from another\n    /// RAII object (which is assumed to be the current top pool).\n    ParsingDeclRAIIObject(Parser &P, ParsingDeclRAIIObject *other)\n        : Actions(P.getActions()),\n          DiagnosticPool(other ? other->DiagnosticPool.getParent() : nullptr) {\n      if (other) {\n        DiagnosticPool.steal(other->DiagnosticPool);\n        other->abort();\n      }\n      push();\n    }\n\n    ~ParsingDeclRAIIObject() {\n      abort();\n    }\n\n    sema::DelayedDiagnosticPool &getDelayedDiagnosticPool() {\n      return DiagnosticPool;\n    }\n    const sema::DelayedDiagnosticPool &getDelayedDiagnosticPool() const {\n      return DiagnosticPool;\n    }\n\n    /// Resets the RAII object for a new declaration.\n    void reset() {\n      abort();\n      push();\n    }\n\n    /// Signals that the context was completed without an appropriate\n    /// declaration being parsed.\n    void abort() {\n      pop(nullptr);\n    }\n\n    void complete(Decl *D) {\n      assert(!Popped && \"ParsingDeclaration has already been popped!\");\n      pop(D);\n    }\n\n    /// Unregister this object from Sema, but remember all the\n    /// diagnostics that were emitted into it.\n    void abortAndRemember() {\n      pop(nullptr);\n    }\n\n  private:\n    void push() {\n      State = Actions.PushParsingDeclaration(DiagnosticPool);\n      Popped = false;\n    }\n\n    void pop(Decl *D) {\n      if (!Popped) {\n        Actions.PopParsingDeclaration(State, D);\n        Popped = true;\n      }\n    }\n  }",
  "id": "BLOCK-CPP-19388",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/llvm/clang/include/clang/Parse/RAIIObjectsForParser.h",
  "source_line": 90,
  "validation_status": "validated"
}