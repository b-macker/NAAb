{
  "code": "#include <cstdio>\n#include <spdlog/details/console_globals.h>\n#include <spdlog/details/synchronous_factory.h>\n#include <spdlog/sinks/sink.h>\n    #include <spdlog/details/windows_include.h>\n\nusing namespace spdlog;\n\nextern \"C\" {\n\nvoid BLOCK-CPP-00478_execute() {\n    {\n\nnamespace sinks {\n\ntemplate <typename ConsoleMutex>\nclass stdout_sink_base : public sink {\npublic:\n    using mutex_t = typename ConsoleMutex::mutex_t;\n    explicit stdout_sink_base(FILE *file);\n    ~stdout_sink_base() override = default;\n\n    stdout_sink_base(const stdout_sink_base &other) = delete;\n    stdout_sink_base(stdout_sink_base &&other) = delete;\n\n    stdout_sink_base &operator=(const stdout_sink_base &other) = delete;\n    stdout_sink_base &operator=(stdout_sink_base &&other) = delete;\n\n    void log(const details::log_msg &msg) override;\n    void flush() override;\n    void set_pattern(const std::string &pattern) override;\n\n    void set_formatter(std::unique_ptr<spdlog::formatter> sink_formatter) override;\n\nprotected:\n    mutex_t &mutex_;\n    FILE *file_;\n    std::unique_ptr<spdlog::formatter> formatter_;\n#ifdef _WIN32\n    HANDLE handle_;\n#endif  // WIN32\n};\n\ntemplate <typename ConsoleMutex>\nclass stdout_sink : public stdout_sink_base<ConsoleMutex> {\npublic:\n    stdout_sink();\n};\n\ntemplate <typename ConsoleMutex>\nclass stderr_sink : public stdout_sink_base<ConsoleMutex> {\npublic:\n    stderr_sink();\n};\n\nusing stdout_sink_mt = stdout_sink<details::console_mutex>;\nusing stdout_sink_st = stdout_sink<details::console_nullmutex>;\n\nusing stderr_sink_mt = stderr_sink<details::console_mutex>;\nusing stderr_sink_st = stderr_sink<details::console_nullmutex>;\n\n}  // namespace sinks\n\n// factory methods\ntemplate <typename Factory = spdlog::synchronous_factory>\nstd::shared_ptr<logger> stdout_logger_mt(const std::string &logger_name);\n\ntemplate <typename Factory = spdlog::synchronous_factory>\nstd::shared_ptr<logger> stdout_logger_st(const std::string &logger_name);\n\ntemplate <typename Factory = spdlog::synchronous_factory>\nstd::shared_ptr<logger> stderr_logger_mt(const std::string &logger_name);\n\ntemplate <typename Factory = spdlog::synchronous_factory>\nstd::shared_ptr<logger> stderr_logger_st(const std::string &logger_name);\n\n}\n}\n\n} // extern \"C\"\n",
  "id": "BLOCK-CPP-00478",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/spdlog/include/spdlog/sinks/stdout_sinks.h",
  "source_line": 15,
  "validation_status": "validated"
}