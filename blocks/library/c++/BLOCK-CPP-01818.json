{
  "code": "{\nABSL_NAMESPACE_BEGIN\n\nBadStatusOrAccess::BadStatusOrAccess(absl::Status status)\n    : status_(std::move(status)) {}\n\nBadStatusOrAccess::BadStatusOrAccess(const BadStatusOrAccess& other)\n    : status_(other.status_) {}\n\nBadStatusOrAccess& BadStatusOrAccess::operator=(\n    const BadStatusOrAccess& other) {\n  // Ensure assignment is correct regardless of whether this->InitWhat() has\n  // already been called.\n  other.InitWhat();\n  status_ = other.status_;\n  what_ = other.what_;\n  return *this;\n}\n\nBadStatusOrAccess& BadStatusOrAccess::operator=(BadStatusOrAccess&& other) {\n  // Ensure assignment is correct regardless of whether this->InitWhat() has\n  // already been called.\n  other.InitWhat();\n  status_ = std::move(other.status_);\n  what_ = std::move(other.what_);\n  return *this;\n}\n\nBadStatusOrAccess::BadStatusOrAccess(BadStatusOrAccess&& other)\n    : status_(std::move(other.status_)) {}\n\nabsl::Nonnull<const char*> BadStatusOrAccess::what() const noexcept {\n  InitWhat();\n  return what_.c_str();\n}\n\nconst absl::Status& BadStatusOrAccess::status() const { return status_; }\n\nvoid BadStatusOrAccess::InitWhat() const {\n  absl::call_once(init_what_, [this] {\n    what_ = absl::StrCat(\"Bad StatusOr access: \", status_.ToString());\n  });\n}\n\nnamespace internal_statusor {\n\nvoid Helper::HandleInvalidStatusCtorArg(absl::Nonnull<absl::Status*> status) {\n  const char* kMessage =\n      \"An OK status is not a valid constructor argument to StatusOr<T>\";\n#ifdef NDEBUG\n  ABSL_INTERNAL_LOG(ERROR, kMessage);\n#else\n  ABSL_INTERNAL_LOG(FATAL, kMessage);\n#endif\n  // In optimized builds, we will fall back to InternalError.\n  *status = absl::InternalError(kMessage);\n}\n\nvoid Helper::Crash(const absl::Status& status) {\n  ABSL_INTERNAL_LOG(\n      FATAL,\n      absl::StrCat(\"Attempting to fetch value instead of handling error \",\n                   status.ToString()));\n}\n\nvoid ThrowBadStatusOrAccess(absl::Status status) {\n#ifdef ABSL_HAVE_EXCEPTIONS\n  throw absl::BadStatusOrAccess(std::move(status));\n#else\n  ABSL_INTERNAL_LOG(\n      FATAL,\n      absl::StrCat(\"Attempting to fetch value instead of handling error \",\n                   status.ToString()));\n  std::abort();\n#endif\n}\n\n}  // namespace internal_statusor\nABSL_NAMESPACE_END\n}",
  "id": "BLOCK-CPP-01818",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/status/statusor.cc",
  "source_line": 27,
  "validation_status": "validated"
}