{
  "code": "{\n  if (text->data() == nullptr) {\n    return false;\n  }\n\n  const char* start = text->data();\n  const char* end = start + text->size();\n  int base = *base_ptr;\n\n  // Consume whitespace.\n  while (start < end &&\n         absl::ascii_isspace(static_cast<unsigned char>(start[0]))) {\n    ++start;\n  }\n  while (start < end &&\n         absl::ascii_isspace(static_cast<unsigned char>(end[-1]))) {\n    --end;\n  }\n  if (start >= end) {\n    return false;\n  }\n\n  // Consume sign.\n  *negative_ptr = (start[0] == '-');\n  if (*negative_ptr || start[0] == '+') {\n    ++start;\n    if (start >= end) {\n      return false;\n    }\n  }\n\n  // Consume base-dependent prefix.\n  //  base 0: \"0x\" -> base 16, \"0\" -> base 8, default -> base 10\n  //  base 16: \"0x\" -> base 16\n  // Also validate the base.\n  if (base == 0) {\n    if (end - start >= 2 && start[0] == '0' &&\n        (start[1] == 'x' || start[1] == 'X')) {\n      base = 16;\n      start += 2;\n      if (start >= end) {\n        // \"0x\" with no digits after is invalid.\n        return false;\n      }\n    } else if (end - start >= 1 && start[0] == '0') {\n      base = 8;\n      start += 1;\n    } else {\n      base = 10;\n    }\n  } else if (base == 16) {\n    if (end - start >= 2 && start[0] == '0' &&\n        (start[1] == 'x' || start[1] == 'X')) {\n      start += 2;\n      if (start >= end) {\n        // \"0x\" with no digits after is invalid.\n        return false;\n      }\n    }\n  } else if (base >= 2 && base <= 36) {\n    // okay\n  } else {\n    return false;\n  }\n  *text = absl::string_view(start, static_cast<size_t>(end - start));\n  *base_ptr = base;\n  return true;\n}",
  "id": "BLOCK-CPP-01973",
  "language": "c++",
  "source_file": "/storage/emulated/0/Download/cpp_codebases/abseil/absl/strings/numbers.cc",
  "source_line": 920,
  "validation_status": "validated"
}